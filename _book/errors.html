<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="nl" xml:lang="nl"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Bijlage D — Assumptieschendingen oplossen – Statistische analyse en presentatie met R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./scales.html" rel="next">
<link href="./Formulas.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="site_libs/quarto-contrib/videojs/video.min.js"></script>
<link href="site_libs/quarto-contrib/videojs/video-js.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Geen resultaten",
    "search-matching-documents-text": "Gevonden documenten",
    "search-copy-link-title": "Kopieer link om te zoeken",
    "search-hide-matches-text": "Extra overeenkomsten verbergen",
    "search-more-match-text": "meer overeenkomst in dit document",
    "search-more-matches-text": "meer overeenkomsten in dit document",
    "search-clear-button-title": "Wissen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuleren",
    "search-submit-button-title": "Verzenden",
    "search-label": "Zoeken"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Schakel zijbalknavigatie" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./common_errors.html">Appendices</a></li><li class="breadcrumb-item"><a href="./errors.html"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Assumptieschendingen oplossen</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Schakel zijbalknavigatie" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Zoeken" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistische analyse en presentatie met R</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Schakel donkere modus"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Zoeken"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Voorwoord</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part_linear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lineaire Statistische Modellen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Schakel sectie">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Relaties tussen Continue Variabelen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bivariate Regressie met Binaire en Categorische Predictoren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Statistische Significantie</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Meervoudige Lineaire Regressie</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Voorspellingen en Fouten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear_06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Model Fit en Modellen Vergelijken</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear_07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">OLS Assumpties</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear_08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Rapporteren en Presenteren van Resultaten</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part_logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logistische Regressiemodellen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Schakel sectie">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logit_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Logistische Regressie &amp; Odds Ratios</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logit_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Marginale Effecten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logit_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Voorspelde kansen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logit_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Model Fit en Modellen Vergelijken</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logit_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Assumpties van Logistische Regressie</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logit_06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Rapporteren en Presenteren van Resultaten</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part_interactions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interacties in Lineaire en Logistische Regressiemodellen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Schakel sectie">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interaction_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Interacties in het Regressiemodel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interaction_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Marginale Effecten in Interactiemodellen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interaction_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Voorspelde Waarden van Interactiemodellen</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Schakel sectie">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./common_errors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Veelgemaakte fouten in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./package_overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Overzicht R Packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Formulas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Formules</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./errors.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Assumptieschendingen oplossen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Indexen en schalen</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhoudsopgave</h2>
   
  <ul>
  <li><a href="#assumpties-over-de-fouten-residuals-in-ols-modellen" id="toc-assumpties-over-de-fouten-residuals-in-ols-modellen" class="nav-link active" data-scroll-target="#assumpties-over-de-fouten-residuals-in-ols-modellen"><span class="header-section-number">D.1</span> Assumpties over de fouten (residuals) in OLS modellen</a></li>
  <li><a href="#omgaan-met-heteroskedasticiteit" id="toc-omgaan-met-heteroskedasticiteit" class="nav-link" data-scroll-target="#omgaan-met-heteroskedasticiteit"><span class="header-section-number">D.2</span> Omgaan met Heteroskedasticiteit</a>
  <ul class="collapse">
  <li><a href="#wat-was-het-probleem-ook-al-weer" id="toc-wat-was-het-probleem-ook-al-weer" class="nav-link" data-scroll-target="#wat-was-het-probleem-ook-al-weer"><span class="header-section-number">D.2.1</span> Wat was het probleem ook al weer?</a></li>
  <li><a href="#mogelijke-oplossing-robuste-standaardfouten" id="toc-mogelijke-oplossing-robuste-standaardfouten" class="nav-link" data-scroll-target="#mogelijke-oplossing-robuste-standaardfouten"><span class="header-section-number">D.2.2</span> Mogelijke oplossing: robuste standaardfouten</a></li>
  </ul></li>
  <li><a href="#omgaan-met-afhankelijke-fouten" id="toc-omgaan-met-afhankelijke-fouten" class="nav-link" data-scroll-target="#omgaan-met-afhankelijke-fouten"><span class="header-section-number">D.3</span> Omgaan met afhankelijke fouten</a>
  <ul class="collapse">
  <li><a href="#probleem-1-geclusterde-data" id="toc-probleem-1-geclusterde-data" class="nav-link" data-scroll-target="#probleem-1-geclusterde-data"><span class="header-section-number">D.3.1</span> Probleem 1: geclusterde data</a></li>
  <li><a href="#mogelijke-oplossing-clustered-standard-errors-fixed-effects" id="toc-mogelijke-oplossing-clustered-standard-errors-fixed-effects" class="nav-link" data-scroll-target="#mogelijke-oplossing-clustered-standard-errors-fixed-effects"><span class="header-section-number">D.3.2</span> Mogelijke oplossing: Clustered standard errors &amp; fixed effects</a></li>
  <li><a href="#probleem-2-data-over-de-tijd-heen-en-seriële-autocorrelatie" id="toc-probleem-2-data-over-de-tijd-heen-en-seriële-autocorrelatie" class="nav-link" data-scroll-target="#probleem-2-data-over-de-tijd-heen-en-seriële-autocorrelatie"><span class="header-section-number">D.3.3</span> Probleem 2: Data over de tijd heen en seriële autocorrelatie</a></li>
  </ul></li>
  <li><a href="#omgaan-met-niet-normaal-verdeelde-residuals" id="toc-omgaan-met-niet-normaal-verdeelde-residuals" class="nav-link" data-scroll-target="#omgaan-met-niet-normaal-verdeelde-residuals"><span class="header-section-number">D.4</span> Omgaan met niet-normaal verdeelde residuals</a>
  <ul class="collapse">
  <li><a href="#wat-was-het-probleem-ook-al-weer-1" id="toc-wat-was-het-probleem-ook-al-weer-1" class="nav-link" data-scroll-target="#wat-was-het-probleem-ook-al-weer-1"><span class="header-section-number">D.4.1</span> Wat was het probleem ook al weer?</a></li>
  <li><a href="#mogelijke-oplossing-bootstrapping" id="toc-mogelijke-oplossing-bootstrapping" class="nav-link" data-scroll-target="#mogelijke-oplossing-bootstrapping"><span class="header-section-number">D.4.2</span> Mogelijke oplossing: bootstrapping</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./common_errors.html">Appendices</a></li><li class="breadcrumb-item"><a href="./errors.html"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Assumptieschendingen oplossen</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Bijlage D — Assumptieschendingen oplossen</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-1-1"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Packages</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1">1</button><span id="annotated-cell-1-2" class="code-annotation-target"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggResidpanel)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2">2</button><span id="annotated-cell-1-3" class="code-annotation-target"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="3">3</button><span id="annotated-cell-1-4" class="code-annotation-target"><a href="#annotated-cell-1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="4">4</button><span id="annotated-cell-1-5" class="code-annotation-target"><a href="#annotated-cell-1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="5">5</button><span id="annotated-cell-1-6" class="code-annotation-target"><a href="#annotated-cell-1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(marginaleffects)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="6">6</button><span id="annotated-cell-1-7" class="code-annotation-target"><a href="#annotated-cell-1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="annotated-cell-1-8"><a href="#annotated-cell-1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-1-9"><a href="#annotated-cell-1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Gebruikte datasets</span></span>
<span id="annotated-cell-1-10"><a href="#annotated-cell-1-10" aria-hidden="true" tabindex="-1"></a>demdata <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"demdata.rds"</span>)</span>
<span id="annotated-cell-1-11"><a href="#annotated-cell-1-11" aria-hidden="true" tabindex="-1"></a>ess_demsatis <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"ess_demsatis.dta"</span>)</span>
<span id="annotated-cell-1-12"><a href="#annotated-cell-1-12" aria-hidden="true" tabindex="-1"></a>normal_residual_data <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"normal_residual_data.rda"</span>)</span>
<span id="annotated-cell-1-13"><a href="#annotated-cell-1-13" aria-hidden="true" tabindex="-1"></a>serial_data <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"./data/serial_autocorrelation.rda"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="2" data-code-annotation="1">Assumpties testen met plots</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="3" data-code-annotation="2">Data importeren</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="4" data-code-annotation="3">Datamanipulatie/plots</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="5" data-code-annotation="4">Regressietabellen maken</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="6" data-code-annotation="5">Voorspelde waarden en marginale effecten</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="7" data-code-annotation="6">Gegevens samenvatten</span>
</dd>
</dl>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Voor wie is deze Appendix?">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Voor wie is deze Appendix?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Je hoeft niet te weten hoe je deze analyses moet uitvoeren voor de opdrachten in Statistiek II. Deze gids is bedoeld voor studenten die hun eindpaper schrijven voor Academische Vaardigheden: Kwantitatieve Data-Analyse of een BAP-scriptieproject en graag assumptieschendingen willen vermijden.</p>
</div>
</div>
<p>Regressiemodellen zijn gebaseerd op een aantal assumpties of aannames. Een belangrijk onderdeel van de analyse is nagaan of aan die assumpties voldaan is. Zoniet, dan moeten assumptieschendingen op een passende manier behandeld worden. Statistiek II richt zich meer op het eerste deel van het proces: wanneer is niet voldaan aan een assumptie? In deze Appendix geven we een kort overzicht van enkele mogelijke oplossingen voor assumptieschendingen waar je mee geconfronteerd kan worden.</p>
<section id="assumpties-over-de-fouten-residuals-in-ols-modellen" class="level2" data-number="D.1">
<h2 data-number="D.1" class="anchored" data-anchor-id="assumpties-over-de-fouten-residuals-in-ols-modellen"><span class="header-section-number">D.1</span> Assumpties over de fouten (residuals) in OLS modellen</h2>
<p><span class="math display">\[
y_{i} = b_{0} + b_{1} * x_{1} + b_{2} * x_{2} ... b_{k} * x_{k} + e_{i}
\]</span></p>
<p>De <span class="math inline">\(e_{i}\)</span> term in bovenstaande vergelijking staat voor de ‘error’, fout, of residual in een linear regressiemodel. Er zijn drie assumpties over deze fouten:<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<ul>
<li>De variantie van de residuals is <em>constant</em> over het hele bereik van de voorspellingen van het model (homoskedasticiteit)</li>
<li>De residuals zijn <em>onafhankelijk</em> van elkaar</li>
<li>De residuals volgen een <em>normaalverdeling</em> met een gemiddelde van 0</li>
</ul>
<p>Schendingen van deze assumpties hebben belangrijke gevolgen voor statistische significantietests. Ernstige schendingen leiden tot onbetrouwbare schattingen van de standaardfout van een coëfficiënt en, als gevolg daarvan, tot onjuiste oordelen over statistische significantie.</p>
</section>
<section id="omgaan-met-heteroskedasticiteit" class="level2" data-number="D.2">
<h2 data-number="D.2" class="anchored" data-anchor-id="omgaan-met-heteroskedasticiteit"><span class="header-section-number">D.2</span> Omgaan met Heteroskedasticiteit</h2>
<section id="wat-was-het-probleem-ook-al-weer" class="level3" data-number="D.2.1">
<h3 data-number="D.2.1" class="anchored" data-anchor-id="wat-was-het-probleem-ook-al-weer"><span class="header-section-number">D.2.1</span> Wat was het probleem ook al weer?</h3>
<p>Onderstaand voorbeeld komt uit <a href="linear_07.html" class="quarto-xref"><span>Hoofdstuk 7</span></a> en voorspelt de mate van politieke stabiliteit in een land op basis van democratieniveaus. In het voorbeeld hebben we ook een kwadratische term voor democratiescore toegevoegd om non-lineaire verbanden te kunnen vatten. Hier is het model en de resultaten:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#gekwadrateerde variabele maken</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>demdata <span class="ot">&lt;-</span> demdata <span class="sc">|&gt;</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">v2x_polyarchy_sq =</span> v2x_polyarchy<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Model schatten</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>violence_sqmodel <span class="ot">&lt;-</span> <span class="fu">lm</span>(pve <span class="sc">~</span> v2x_polyarchy <span class="sc">+</span> v2x_polyarchy_sq, </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">data=</span>demdata)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># coëfficiënten bekijken</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(violence_sqmodel, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 7
  term             estimate std.error statistic  p.value conf.low conf.high
  &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)        -0.589     0.243     -2.42 0.0165      -1.07    -0.109
2 v2x_polyarchy      -1.73      1.10      -1.58 0.117       -3.90     0.438
3 v2x_polyarchy_sq    3.83      1.05       3.64 0.000361     1.75     5.90 </code></pre>
</div>
</div>
<p>We kunnen kijken of de assumptie van homoskedasticiteit geschonden is via <code>resid_panel()</code> zoals besproken in <a href="linear_07.html" class="quarto-xref"><span>Hoofdstuk 7</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assumptie bekijken</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">resid_panel</span>(violence_sqmodel, <span class="at">plots =</span> <span class="fu">c</span>(<span class="st">"resid"</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="errors_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Aan de assumptie is voldaan als de fouten een even grote spreiding kennen op lage, gemiddelde, en hoge waarden van de voorspelde waarden. Ze moeten zich ongeveer in een evenwijdige band bevinden. Hier zien we dat de assumptie geschonden is aan de trechtervorm: we vinden een grote spreiding van residuals bij lage voorspele waarden (de schatting is hier onnauwkeurig) en weinig spreiding bij hoge voorspelde waarden (de schatting is hier veel nauwkeuriger).</p>
</section>
<section id="mogelijke-oplossing-robuste-standaardfouten" class="level3" data-number="D.2.2">
<h3 data-number="D.2.2" class="anchored" data-anchor-id="mogelijke-oplossing-robuste-standaardfouten"><span class="header-section-number">D.2.2</span> Mogelijke oplossing: robuste standaardfouten</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Opmerking
</div>
</div>
<div class="callout-body-container callout-body">
<p>De <code>vcov</code> functie die we hieronder gebruiken is afkomstig uit het<code>sandwich</code>package en helpt bij de berekening van robuuste standaardfouten. Je zult dit package misschien eerst moeten installeren.</p>
</div>
</div>
<p>Heteroskedasticiteit heeft verschillende mogelijke oorzaken. Zo kan het onstaan door het ontbrekenen van belangrijke predictoren in het model. Het is een goed idee om na te denken over waarom de residuals zo verschillen en welke bijkomende onafhankelijke variabele deze spreiding kan verklaren. We kunnen dit echter niet altijd weten en als we al een idee hebben, kan het zijn dat de relevante onafhankelijke variabele niet in de dataset voorkomt.</p>
<p>Een andere mogelijke oorzaak is dat we een lineaire relatie schatten waar eigenlijk een niet-lineaire relatie geschat moet worden. Dit is hier echter niet het geval.</p>
<p>Wat kunnen we dan nog doen?</p>
<p>Een gangbare manier is om de berekenmethode voor de standaardfouten van de coëfficiënten in het model aan te passen. De standaardfouten die normaal door R worden berekend gaan uit van homoskedasticiteit, maar we kunnen ‘heteroskedasticiteit-robuuste’ standaardfouten berekenen als alternatief. Belangrijk is om te onthouden dat deze oplossing een mathematisch ‘truukje’ is, ons model past nog altijd slecht en het is belangrijk theoretisch hierover na te denken. De eerste stap blijft altijd om na te denken over mogelijk ontbrekende predictoren.</p>
<p>De eenvoudigste manier om robuuste standaardfouten te verkrijgen is via het <code>modelsummary</code> package. We bekijken eerst nog even de ‘normale’ regressie-output voor het model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(violence_sqmodel, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">stars =</span> T, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">coef_rename =</span> <span class="fu">c</span>(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">"(Intercept)"</span> <span class="ot">=</span> <span class="st">"Intercept"</span>, </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">"v2x_polyarchy"</span> <span class="ot">=</span> <span class="st">"Democratiescore"</span>, </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"v2x_polyarchy_sq"</span> <span class="ot">=</span> <span class="st">"Democratiescore gekwadrateerd"</span>), </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_ry5w6adrjmyyl6zzcab1(i, j, css_id) {
          var table = document.getElementById("tinytable_ry5w6adrjmyyl6zzcab1");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_ry5w6adrjmyyl6zzcab1');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_ry5w6adrjmyyl6zzcab1(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_ry5w6adrjmyyl6zzcab1");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_yuv9v6mn4bleg9152keo',}, 
          { positions: [ { i: 6, j: 0 },  ], css_id: 'tinytable_css_sux6v2ymrl97x0n6ipk5',}, 
          { positions: [ { i: 9, j: 1 },  ], css_id: 'tinytable_css_suwba0ui7li5v5zszklg',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_koipfppa4bqmpm5fv67c',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 },  ], css_id: 'tinytable_css_gztp0o5m83k316fzpczl',}, 
          { positions: [ { i: 6, j: 1 },  ], css_id: 'tinytable_css_7svrbnav1g09x9dn306t',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 },  ], css_id: 'tinytable_css_4fj75yyqwk8zb1nghj05',}, 
          { positions: [ { i: 9, j: 0 },  ], css_id: 'tinytable_css_48ezcy0cm6sykh6jzp3l',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_ry5w6adrjmyyl6zzcab1(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_yuv9v6mn4bleg9152keo, .table th.tinytable_css_yuv9v6mn4bleg9152keo { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_sux6v2ymrl97x0n6ipk5, .table th.tinytable_css_sux6v2ymrl97x0n6ipk5 { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_suwba0ui7li5v5zszklg, .table th.tinytable_css_suwba0ui7li5v5zszklg { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_koipfppa4bqmpm5fv67c, .table th.tinytable_css_koipfppa4bqmpm5fv67c { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_gztp0o5m83k316fzpczl, .table th.tinytable_css_gztp0o5m83k316fzpczl { text-align: left; }
      .table td.tinytable_css_7svrbnav1g09x9dn306t, .table th.tinytable_css_7svrbnav1g09x9dn306t { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_4fj75yyqwk8zb1nghj05, .table th.tinytable_css_4fj75yyqwk8zb1nghj05 { text-align: center; }
      .table td.tinytable_css_48ezcy0cm6sykh6jzp3l, .table th.tinytable_css_48ezcy0cm6sykh6jzp3l { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_ry5w6adrjmyyl6zzcab1" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="2">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>Intercept</td>
                  <td>-0.589*</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.243)</td>
                </tr>
                <tr>
                  <td>Democratiescore</td>
                  <td>-1.731</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(1.098)</td>
                </tr>
                <tr>
                  <td>Democratiescore gekwadrateerd</td>
                  <td>3.829***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(1.051)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>164</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.401</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.394</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<p>De tabel hierboven maakt gebruik van de normale standaardfouten. We kunnen de robuuste opvragen via de <code>vcov</code> optie:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(violence_sqmodel, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">stars =</span> T, </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"HC3"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">coef_rename =</span> <span class="fu">c</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">"(Intercept)"</span> <span class="ot">=</span> <span class="st">"Intercept"</span>, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"v2x_polyarchy"</span> <span class="ot">=</span> <span class="st">"Democratiescore"</span>, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>               <span class="st">"v2x_polyarchy_sq"</span> <span class="ot">=</span> <span class="st">"Democratiescore gekwadrateerd"</span>), </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_pg788nuwwbyybrgvv54u(i, j, css_id) {
          var table = document.getElementById("tinytable_pg788nuwwbyybrgvv54u");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_pg788nuwwbyybrgvv54u');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_pg788nuwwbyybrgvv54u(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_pg788nuwwbyybrgvv54u");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 },  ], css_id: 'tinytable_css_rm7xzuf1qp64sytgu98q',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_r07imrer4z2att5cxq5l',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_q8jko9ncgnypz0wza481',}, 
          { positions: [ { i: 9, j: 0 },  ], css_id: 'tinytable_css_pv5jnpdanyj3fvs0a29c',}, 
          { positions: [ { i: 6, j: 1 },  ], css_id: 'tinytable_css_n2zdvm6pwrfg073vi2c0',}, 
          { positions: [ { i: 6, j: 0 },  ], css_id: 'tinytable_css_9ge92a2xmbgzaudf89d6',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 },  ], css_id: 'tinytable_css_40ozg0agwd1746x1kx6v',}, 
          { positions: [ { i: 9, j: 1 },  ], css_id: 'tinytable_css_1ns5np782jao05cswr4t',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_pg788nuwwbyybrgvv54u(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_rm7xzuf1qp64sytgu98q, .table th.tinytable_css_rm7xzuf1qp64sytgu98q { text-align: left; }
      .table td.tinytable_css_r07imrer4z2att5cxq5l, .table th.tinytable_css_r07imrer4z2att5cxq5l { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_q8jko9ncgnypz0wza481, .table th.tinytable_css_q8jko9ncgnypz0wza481 { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_pv5jnpdanyj3fvs0a29c, .table th.tinytable_css_pv5jnpdanyj3fvs0a29c { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_n2zdvm6pwrfg073vi2c0, .table th.tinytable_css_n2zdvm6pwrfg073vi2c0 { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_9ge92a2xmbgzaudf89d6, .table th.tinytable_css_9ge92a2xmbgzaudf89d6 { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_40ozg0agwd1746x1kx6v, .table th.tinytable_css_40ozg0agwd1746x1kx6v { text-align: center; }
      .table td.tinytable_css_1ns5np782jao05cswr4t, .table th.tinytable_css_1ns5np782jao05cswr4t { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_pg788nuwwbyybrgvv54u" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="2">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>Intercept</td>
                  <td>-0.589+</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.303)</td>
                </tr>
                <tr>
                  <td>Democratiescore</td>
                  <td>-1.731</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(1.249)</td>
                </tr>
                <tr>
                  <td>Democratiescore gekwadrateerd</td>
                  <td>3.829***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(1.107)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>164</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.401</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.394</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<dl>
<dt><code>vcov = "HC3"</code></dt>
<dd>
<p>De <code>vcov =</code> optie vraagt om robuuste standaardfouten te berekenen en te gebruiken in de tabel. “HC3” staat voor ‘heteroskedasticiteit-robuuste standardfouten’. Er zijn verschillende heteroskedasticiteit-robuuste standaardfouten (bv., “HC0”, “HC1”, etc.). We raden “HC3” aan als standaard, ook omdat deze goed werkt bij kleine steekproefgroottes.</p>
</dd>
</dl>
<p>Laten we de ‘normale’ en ‘robuuste’ standaardfouten vergelijken:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(violence_sqmodel, </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">stars =</span> T, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="fu">c</span>(<span class="st">"classical"</span>, <span class="st">"HC3"</span>), </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">coef_rename =</span> <span class="fu">c</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">"(Intercept)"</span> <span class="ot">=</span> <span class="st">"Intercept"</span>, </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"v2x_polyarchy"</span> <span class="ot">=</span> <span class="st">"Democratiescore"</span>, </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>               <span class="st">"v2x_polyarchy_sq"</span> <span class="ot">=</span> <span class="st">"Democratiescore gekwadrateerd"</span>),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_7yhqrk614ax444e0myil(i, j, css_id) {
          var table = document.getElementById("tinytable_7yhqrk614ax444e0myil");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_7yhqrk614ax444e0myil');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_7yhqrk614ax444e0myil(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_7yhqrk614ax444e0myil");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 6, j: 2 }, { i: 6, j: 1 },  ], css_id: 'tinytable_css_rsljvq4b6fj9pf8tibo7',}, 
          { positions: [ { i: 9, j: 0 },  ], css_id: 'tinytable_css_ls9ded9osm1t6itb688b',}, 
          { positions: [ { i: 9, j: 1 }, { i: 9, j: 2 },  ], css_id: 'tinytable_css_itxcrup80fleglrxstkz',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 },  ], css_id: 'tinytable_css_dlganm48yg2rn4nrw7ip',}, 
          { positions: [ { i: 0, j: 1 }, { i: 0, j: 2 },  ], css_id: 'tinytable_css_bb2psylpb69vd4tirxil',}, 
          { positions: [ { i: 6, j: 0 },  ], css_id: 'tinytable_css_68abq2pai9lovvr1eonp',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_67364k1dzcbcjseubvfm',}, 
          { positions: [ { i: 1, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 2, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 3, j: 2 }, { i: 4, j: 2 }, { i: 1, j: 2 }, { i: 2, j: 2 }, { i: 7, j: 2 }, { i: 8, j: 2 }, { i: 5, j: 2 },  ], css_id: 'tinytable_css_3u85r28q7tv0nmed3vj3',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_7yhqrk614ax444e0myil(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_rsljvq4b6fj9pf8tibo7, .table th.tinytable_css_rsljvq4b6fj9pf8tibo7 { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_ls9ded9osm1t6itb688b, .table th.tinytable_css_ls9ded9osm1t6itb688b { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_itxcrup80fleglrxstkz, .table th.tinytable_css_itxcrup80fleglrxstkz { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_dlganm48yg2rn4nrw7ip, .table th.tinytable_css_dlganm48yg2rn4nrw7ip { text-align: left; }
      .table td.tinytable_css_bb2psylpb69vd4tirxil, .table th.tinytable_css_bb2psylpb69vd4tirxil { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_68abq2pai9lovvr1eonp, .table th.tinytable_css_68abq2pai9lovvr1eonp { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_67364k1dzcbcjseubvfm, .table th.tinytable_css_67364k1dzcbcjseubvfm { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_3u85r28q7tv0nmed3vj3, .table th.tinytable_css_3u85r28q7tv0nmed3vj3 { text-align: center; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_7yhqrk614ax444e0myil" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
                <th scope="col">(2)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="3">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>Intercept</td>
                  <td>-0.589*</td>
                  <td>-0.589+</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.243)</td>
                  <td>(0.303)</td>
                </tr>
                <tr>
                  <td>Democratiescore</td>
                  <td>-1.731</td>
                  <td>-1.731</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(1.098)</td>
                  <td>(1.249)</td>
                </tr>
                <tr>
                  <td>Democratiescore gekwadrateerd</td>
                  <td>3.829***</td>
                  <td>3.829***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(1.051)</td>
                  <td>(1.107)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>164</td>
                  <td>164</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.401</td>
                  <td>0.401</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.394</td>
                  <td>0.394</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<p>De eerste kolom toont de resultaten voor de ‘normale’ standaardfouten, de tweede kolom deze voor de ‘robuuste’ fouten. We kunnen het volgende opmerken:</p>
<ul>
<li>De coëfficiënten veranderen niet, enkel de standaardfouten.</li>
<li>De robuuste standaardfouten zijn typisch groter. Heteroskedasticiteit zorgt immers doorgaans voor een neerwaarste bias: standaarfouten worden te klein geschat als we de normale methode zouden gebruiken.</li>
<li>De interpretatie van de resultaten verandert hier niet. De significantietoetsen voor de predictoren komen uit op dezelfde conclusies. Di is echter lang niet altijd het geval!</li>
</ul>
<p>Het voorbeeld hierboven maakt gebruik van <code>modelsummary()</code> en geeft de resultaten weer in een tabel. Ook voor voorspelde waarden en coëfficiëntenplots kunnen we robuuste standaardfouten gebruiken zodanig dat betrouwbaarheidsintervallen aangepast worden.</p>
<p>We blijven de bovenstaande <code>vcov</code> optie gebruiken, maar binnen de <code>predictions()</code> functie uit het <code>marginaleffects</code> package (bv., <code>predictions(model, ..., vcov = "HC3")</code>) voor voorspelde waarden.</p>
<p>Voor coëfficiëntenplots kunnen we de syntax echter niet netjes combineren met <code>tidy()</code> zoals we deden in <a href="linear_08.html" class="quarto-xref"><span>Hoofdstuk 8</span></a>. In de plaats daarvan gebruiken we de <code>avg_slopes()</code> functie uit het <code>marginaleffects</code> package. <code>avg_slopes()</code> schat de marginale effecten van elke predictor in het model. Bij OLS is dit gelijk aan de coëfficiënten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resultaten via tidy</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(violence_sqmodel)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term             estimate std.error statistic  p.value
  &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)        -0.589     0.243     -2.42 0.0165  
2 v2x_polyarchy      -1.73      1.10      -1.58 0.117   
3 v2x_polyarchy_sq    3.83      1.05       3.64 0.000361</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resultaten  via avg_slopes</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">avg_slopes</span>(violence_sqmodel)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
             Term Estimate Std. Error     z Pr(&gt;|z|)    S 2.5 % 97.5 %
 v2x_polyarchy       -1.73       1.10 -1.58    0.115  3.1 -3.88  0.421
 v2x_polyarchy_sq     3.83       1.05  3.64   &lt;0.001 11.9  1.77  5.888

Type:  response 
Comparison: dY/dX</code></pre>
</div>
</div>
<p>We voegen de <code>vcov =</code> optie toe aan de <code>avg_slopes()</code> functie en plotten de resultaten:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-9"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-9-1"><a href="#annotated-cell-9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># robuuste SEs en plot</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="1">1</button><span id="annotated-cell-9-2" class="code-annotation-target"><a href="#annotated-cell-9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">avg_slopes</span>(violence_sqmodel, <span class="at">vcov =</span> <span class="st">"HC3"</span>) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-9-3"><a href="#annotated-cell-9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate, <span class="at">y =</span> term)) <span class="sc">+</span> </span>
<span id="annotated-cell-9-4"><a href="#annotated-cell-9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> conf.low, <span class="at">xmax =</span> conf.high)) <span class="sc">+</span> </span>
<span id="annotated-cell-9-5"><a href="#annotated-cell-9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(estimate, <span class="dv">2</span>)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="annotated-cell-9-6"><a href="#annotated-cell-9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">'dashed'</span>, <span class="at">color =</span> <span class="st">'red'</span>) <span class="sc">+</span> </span>
<span id="annotated-cell-9-7"><a href="#annotated-cell-9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="annotated-cell-9-8"><a href="#annotated-cell-9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Coëfficiënt"</span>, </span>
<span id="annotated-cell-9-9"><a href="#annotated-cell-9-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Onafhankelijke variabele"</span>, </span>
<span id="annotated-cell-9-10"><a href="#annotated-cell-9-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Coëfficiënten met Heteroskedasticiteit-robuuste betrouwbaarheidsintervallen"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-9" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="2" data-code-annotation="1">Opvragen van marginale effecten van de predictoren samen met de robuuste standaardfouten.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="errors_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="omgaan-met-afhankelijke-fouten" class="level2 page-columns page-full" data-number="D.3">
<h2 data-number="D.3" class="anchored" data-anchor-id="omgaan-met-afhankelijke-fouten"><span class="header-section-number">D.3</span> Omgaan met afhankelijke fouten</h2>
<p>Een tweede belangrijke assumptie in OLS (en logistische) modellen is deze van <em>onafhankelijkheid</em>. We gaan ervan uit dat de fouten in de populatie en in ons model niet gecorreleerd zijn met elkaar. Deze assumptie kan geschonden zijn wanneer data ‘geclusterd’ is.</p>
<section id="probleem-1-geclusterde-data" class="level3" data-number="D.3.1">
<h3 data-number="D.3.1" class="anchored" data-anchor-id="probleem-1-geclusterde-data"><span class="header-section-number">D.3.1</span> Probleem 1: geclusterde data</h3>
<section id="voorbeeld-van-het-probleem" class="level4" data-number="D.3.1.1">
<h4 data-number="D.3.1.1" class="anchored" data-anchor-id="voorbeeld-van-het-probleem"><span class="header-section-number">D.3.1.1</span> Voorbeeld van het probleem</h4>
<p>Stel dat we meten in welke mate burgers tevreden zijn met democratie in verschillende Europese landen (bv. met links-rechtspositie als predictor). We kunnen de European Social Survey (ESS) gebruike, waarbij respondenten uit verschillende landen werden ondervraagd. Wanneer de analyse meerdere landen beschouwt, zijn respondenten geclustert in hun land.</p>
<p>We bekijken de resultaten van een dergelijk model. De afhankelijke variabele meet tevredenheid met democratie op een schaal van 0 (“zeer ontevreden”) tot 10 (“zeer tevreden”). De onafhankelijke variabele meet links-rechtspositie met een schaal van 0 (“links”) tot 10 (“rechts”).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>demsatis_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(stfdem <span class="sc">~</span> lrscale, <span class="at">data =</span> ess_demsatis)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Coefficients</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(demsatis_model, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 7
  term        estimate std.error statistic   p.value conf.low conf.high
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)    4.53    0.0308      147.  0            4.47      4.59 
2 lrscale        0.128   0.00556      23.1 7.97e-117    0.117     0.139</code></pre>
</div>
</div>
<p>De coëfficiënt voor links-rechtspositie (<code>lrscale</code>) is positief: mensen die zich meer aan de rechterkant van het politieke spectrum plaatsen zijn meer tevreden met democratie. De coëfficiënt is ook statistisch significant met wel een heel kleine p-waarde (7.97e-117). Laten we echter kijken hoe clustering hier bij komt kijken.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="annotated-cell-11"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-11-1"><a href="#annotated-cell-11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extra package for plotting</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="1">1</button><span id="annotated-cell-11-2" class="code-annotation-target"><a href="#annotated-cell-11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="annotated-cell-11-3"><a href="#annotated-cell-11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-11-4"><a href="#annotated-cell-11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution plot</span></span>
<span id="annotated-cell-11-5"><a href="#annotated-cell-11-5" aria-hidden="true" tabindex="-1"></a>distribution_plot <span class="ot">&lt;-</span> ess_demsatis <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="2">2</button><span id="annotated-cell-11-6" class="code-annotation-target"><a href="#annotated-cell-11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name, stfdem) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-11-7"><a href="#annotated-cell-11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-11-8"><a href="#annotated-cell-11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="3">3</button><span id="annotated-cell-11-9" class="code-annotation-target"><a href="#annotated-cell-11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-11-10"><a href="#annotated-cell-11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-11-11"><a href="#annotated-cell-11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> stfdem, <span class="at">y =</span> prop)) <span class="sc">+</span> </span>
<span id="annotated-cell-11-12"><a href="#annotated-cell-11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="annotated-cell-11-13"><a href="#annotated-cell-11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> country_name) <span class="sc">+</span> </span>
<span id="annotated-cell-11-14"><a href="#annotated-cell-11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="annotated-cell-11-15"><a href="#annotated-cell-11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Variatie volgens Land"</span>, </span>
<span id="annotated-cell-11-16"><a href="#annotated-cell-11-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proportie"</span>, </span>
<span id="annotated-cell-11-17"><a href="#annotated-cell-11-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Tevredenheidsscore"</span>) <span class="sc">+</span> </span>
<span id="annotated-cell-11-18"><a href="#annotated-cell-11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">10</span>))</span>
<span id="annotated-cell-11-19"><a href="#annotated-cell-11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-11-20"><a href="#annotated-cell-11-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot of means</span></span>
<span id="annotated-cell-11-21"><a href="#annotated-cell-11-21" aria-hidden="true" tabindex="-1"></a>mean_plot <span class="ot">&lt;-</span> ess_demsatis <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-11-22"><a href="#annotated-cell-11-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-11-23"><a href="#annotated-cell-11-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">dem_satis =</span> <span class="fu">mean</span>(stfdem, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="4">4</button><span id="annotated-cell-11-24" class="code-annotation-target"><a href="#annotated-cell-11-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> dem_satis, <span class="at">y =</span> <span class="fu">reorder</span>(country_name, dem_satis))) <span class="sc">+</span></span>
<span id="annotated-cell-11-25"><a href="#annotated-cell-11-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="annotated-cell-11-26"><a href="#annotated-cell-11-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="annotated-cell-11-27"><a href="#annotated-cell-11-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Gemiddelde per land"</span>, </span>
<span id="annotated-cell-11-28"><a href="#annotated-cell-11-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Naam land"</span>, </span>
<span id="annotated-cell-11-29"><a href="#annotated-cell-11-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Gemiddelde tevredenheid met democratie"</span>)</span>
<span id="annotated-cell-11-30"><a href="#annotated-cell-11-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-11-31"><a href="#annotated-cell-11-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine together using patchwork</span></span>
<span id="annotated-cell-11-32"><a href="#annotated-cell-11-32" aria-hidden="true" tabindex="-1"></a>distribution_plot <span class="sc">+</span> mean_plot</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-11" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="2" data-code-annotation="1">De <code>patchwork</code> library wordt hier gebruikt om meerdere grafieken te combineren met elkaar.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="6" data-code-annotation="2">Deze regels berekenen het aantal antwoorden per antwoordcategorie per land.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="9" data-code-annotation="3">We berekenen hier de proportie van observaties met een specifieke respons per land.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="24" data-code-annotation="4">De <code>reorder()</code> optie herordent de y-as zodat die loopt van hogere tot lagere gemiddelde scores.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="errors_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="1152"></p>
</figure>
</div>
</div>
</div>
<p>Het linkse plot in de figuur hierboven toont de proportie observaties per antwoordcategorie (x-as) per land (aparte ‘facets’). De plot toont variatie tussen individuen binnen een land: sommige zijn tevreden, andere niet. De verdeling van observaties is echter niet dezelfde per land. Sommige landen zien meer tevreden respondenten (bv., Finland, Norwegen, en Zwitserland) terwijl in andere landen mensen zich meer onderaan de schaal bevinden (bv., Bulgarije, Servië, en Griekenland).</p>
<p>Er is dus niet alleen variatie tussen individuen, maar ook variatie <em>tussen landen</em>. Dit zien we ook op het rechtse plot, dat de gemiddelde tevedenheidsscore per land weergeeft.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>Democratische tevredenheid is hoger in sommige landen dan andere. Daar kunnen verschillende redenen voor bestaan: andere politieke instituties, economische welvaart, corruptieniveaus enz. Mensen binnen een land leven in een context waarin die factoren gelijk zijn, maar mensen buiten een bepaald land leven in andere omstandigheden. We kunne dan ook verwachten dat errors van mensen binnen een bepaald land gecorreleerd zijn met elkaar in een studie waarbij meerdere landen zijn opgenomen.De standaardfouten in het model zijn dan wellicht ook niet correct.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>We kunnen 2 methoden gebruiken om dit te corrigeren:<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>We kunnen gebruik maken van “geclusterde standaardfouten” en “fixed effects”. Net zoals bij heteroskedasticiteit herberekenen we de standaardfouten (Let op: de berekening is wel anders). Deze corrigeren voor het feit dat de errors van observaties binnen een cluster (hier: land) gecorreleerd zijn. Fixed effects toevoegen houdt in dat we een dummy-variabele toevoegen per cluster (hier:land) om te controleren op variaties in de afhankelijke variabele afkomstig uit kenmerken van de cluster.</p>
<p>Sommige onderzoekers maken ook gebruik van “multilevel modellen”. Met deze modellen kunnen predictoren op het niveau van individuele respondenten alsook predictoren op het cluster-niveau worden toegevoegd (bv. BBP) Deze methode is te gevorderd voor dit handboek en wordt verder niet besproken.</p>
</section>
</section>
<section id="mogelijke-oplossing-clustered-standard-errors-fixed-effects" class="level3" data-number="D.3.2">
<h3 data-number="D.3.2" class="anchored" data-anchor-id="mogelijke-oplossing-clustered-standard-errors-fixed-effects"><span class="header-section-number">D.3.2</span> Mogelijke oplossing: Clustered standard errors &amp; fixed effects</h3>
<p>We schatten ons model met geclusterde standaardfouten met de code uitgelegd hieronder. Om “fixed effects” toe te voegen transformeren we gewoon de clustervariabele in een factor-variabele. Wanneer we deze factor toevoegen aan het model neemt R dummies op voor elke cluster, behoudens de referentiecategorie. <a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># factor maken</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>ess_demsatis <span class="ot">&lt;-</span> ess_demsatis <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">country_name_F =</span> <span class="fu">factor</span>(country_name))</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Controleren of alles juist is gegaan: Austria is hier de referentiecategorie</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(ess_demsatis<span class="sc">$</span>country_name_F)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Austria"        "Belgium"        "Bulgaria"       "Croatia"       
 [5] "Cyprus"         "Finland"        "France"         "Germany"       
 [9] "Greece"         "Hungary"        "Iceland"        "Ireland"       
[13] "Israel"         "Italy"          "Latvia"         "Lithuania"     
[17] "Montenegro"     "Netherlands"    "Norway"         "Poland"        
[21] "Portugal"       "Serbia"         "Slovakia"       "Slovenia"      
[25] "Spain"          "Sweden"         "Switzerland"    "United Kingdom"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Factor toevoegen aan model</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>demsatis_model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(stfdem <span class="sc">~</span> lrscale <span class="sc">+</span> country_name_F, <span class="at">data =</span> ess_demsatis)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Coëfficiënten opvragen</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(demsatis_model2, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 29 × 7
   term                estimate std.error statistic   p.value conf.low conf.high
   &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)           5.15     0.0568     90.7   0            5.03     5.26  
 2 lrscale               0.136    0.00521    26.2   4.59e-150    0.126    0.147 
 3 country_name_FBelg…  -0.550    0.0790     -6.96  3.45e- 12   -0.704   -0.395 
 4 country_name_FBulg…  -2.42     0.0751    -32.1   7.25e-224   -2.56    -2.27  
 5 country_name_FCroa…  -1.35     0.0819    -16.5   8.89e- 61   -1.51    -1.19  
 6 country_name_FCypr…  -1.27     0.108     -11.7   8.62e- 32   -1.49    -1.06  
 7 country_name_FFinl…   0.885    0.0791     11.2   4.70e- 29    0.730    1.04  
 8 country_name_FFran…  -1.53     0.0782    -19.6   4.41e- 85   -1.68    -1.38  
 9 country_name_FGerm…  -0.0598   0.0705     -0.848 3.96e-  1   -0.198    0.0784
10 country_name_FGree…  -1.62     0.0703    -23.0   1.57e-116   -1.76    -1.48  
# ℹ 19 more rows</code></pre>
</div>
</div>
<p>Het model bevat nu een coëfficiënt voor links-rechtspositie (<code>lrscale</code>) en een reeks dummy-variabelen voor elk land (<code>country_name_FBelgium</code>, <code>country_name_FBulgaria</code>, etc.). Schrik niet van deze output, dit is effectief de bedoeling!</p>
<p>De coëfficient voor <code>lrscale</code> toont de associatie tussen links-rechtspositie en tevredenheid met democratie, gecontroleerd voor het land waar de respondent zich bevindt. De dummy-coëfficiënten tonen het verschil tussen elk land en de referentiecategorie (Oostenrijk), gecontroleerd voor <code>lrscale</code>. We vinden bijvoorbeeld dat als we Bulgaarse en Oostenrijkse burgers met dezelfde ideologiescore zouden vergelijken, dan zouden we verwachten dat tevredenheid van Bulgaarse burgers gemiddeld genomen 2.42 eenheden lager is dan die van Oostenrijkse burgers.</p>
<p>De resultaten hieboven maken nog gebruik van de ‘normale’ standaardfouten. We kunnen de geclusterde standaardfouten toevoegen via <code>modelsummary()</code> met de <code>vcov =</code> optie, zoals hieronder (<code>coef_rename</code> hebben we hier even weggelaten).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  demsatis_model2, </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> T, </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vcov =</span> <span class="sc">~</span>country_name_F, </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_xx1zgyz6jocp066tk7px(i, j, css_id) {
          var table = document.getElementById("tinytable_xx1zgyz6jocp066tk7px");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_xx1zgyz6jocp066tk7px');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_xx1zgyz6jocp066tk7px(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_xx1zgyz6jocp066tk7px");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 10, j: 1 }, { i: 11, j: 1 }, { i: 12, j: 1 }, { i: 13, j: 1 }, { i: 14, j: 1 }, { i: 15, j: 1 }, { i: 16, j: 1 }, { i: 17, j: 1 }, { i: 18, j: 1 }, { i: 19, j: 1 }, { i: 20, j: 1 }, { i: 21, j: 1 }, { i: 22, j: 1 }, { i: 23, j: 1 }, { i: 24, j: 1 }, { i: 25, j: 1 }, { i: 26, j: 1 }, { i: 27, j: 1 }, { i: 28, j: 1 }, { i: 29, j: 1 }, { i: 30, j: 1 }, { i: 31, j: 1 }, { i: 32, j: 1 }, { i: 33, j: 1 }, { i: 34, j: 1 }, { i: 35, j: 1 }, { i: 36, j: 1 }, { i: 37, j: 1 }, { i: 38, j: 1 }, { i: 39, j: 1 }, { i: 40, j: 1 }, { i: 41, j: 1 }, { i: 42, j: 1 }, { i: 43, j: 1 }, { i: 44, j: 1 }, { i: 45, j: 1 }, { i: 46, j: 1 }, { i: 47, j: 1 }, { i: 48, j: 1 }, { i: 49, j: 1 }, { i: 50, j: 1 }, { i: 51, j: 1 }, { i: 52, j: 1 }, { i: 53, j: 1 }, { i: 54, j: 1 }, { i: 55, j: 1 }, { i: 56, j: 1 }, { i: 57, j: 1 }, { i: 59, j: 1 }, { i: 60, j: 1 },  ], css_id: 'tinytable_css_tvbzzt33wj9xo32jdpsg',}, 
          { positions: [ { i: 58, j: 1 },  ], css_id: 'tinytable_css_putrptat5zdedcyjb59t',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_jzp7ftfys0jiy2jpby25',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 10, j: 0 }, { i: 11, j: 0 }, { i: 12, j: 0 }, { i: 13, j: 0 }, { i: 14, j: 0 }, { i: 15, j: 0 }, { i: 16, j: 0 }, { i: 17, j: 0 }, { i: 18, j: 0 }, { i: 19, j: 0 }, { i: 20, j: 0 }, { i: 21, j: 0 }, { i: 22, j: 0 }, { i: 23, j: 0 }, { i: 24, j: 0 }, { i: 25, j: 0 }, { i: 26, j: 0 }, { i: 27, j: 0 }, { i: 28, j: 0 }, { i: 29, j: 0 }, { i: 30, j: 0 }, { i: 31, j: 0 }, { i: 32, j: 0 }, { i: 33, j: 0 }, { i: 34, j: 0 }, { i: 35, j: 0 }, { i: 36, j: 0 }, { i: 37, j: 0 }, { i: 38, j: 0 }, { i: 39, j: 0 }, { i: 40, j: 0 }, { i: 41, j: 0 }, { i: 42, j: 0 }, { i: 43, j: 0 }, { i: 44, j: 0 }, { i: 45, j: 0 }, { i: 46, j: 0 }, { i: 47, j: 0 }, { i: 48, j: 0 }, { i: 49, j: 0 }, { i: 50, j: 0 }, { i: 51, j: 0 }, { i: 52, j: 0 }, { i: 53, j: 0 }, { i: 54, j: 0 }, { i: 55, j: 0 }, { i: 56, j: 0 }, { i: 57, j: 0 }, { i: 59, j: 0 }, { i: 60, j: 0 },  ], css_id: 'tinytable_css_im2h0hwfn1rakvvoeiaj',}, 
          { positions: [ { i: 61, j: 0 },  ], css_id: 'tinytable_css_9p80jbh4o5bu8rojv03q',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_7d4pbhqf403wx0c3dyia',}, 
          { positions: [ { i: 58, j: 0 },  ], css_id: 'tinytable_css_5yhcotgvua4h7lceuw6l',}, 
          { positions: [ { i: 61, j: 1 },  ], css_id: 'tinytable_css_35eo15dquags8x4qatjz',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_xx1zgyz6jocp066tk7px(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_tvbzzt33wj9xo32jdpsg, .table th.tinytable_css_tvbzzt33wj9xo32jdpsg { text-align: center; }
      .table td.tinytable_css_putrptat5zdedcyjb59t, .table th.tinytable_css_putrptat5zdedcyjb59t { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_jzp7ftfys0jiy2jpby25, .table th.tinytable_css_jzp7ftfys0jiy2jpby25 { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_im2h0hwfn1rakvvoeiaj, .table th.tinytable_css_im2h0hwfn1rakvvoeiaj { text-align: left; }
      .table td.tinytable_css_9p80jbh4o5bu8rojv03q, .table th.tinytable_css_9p80jbh4o5bu8rojv03q { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_7d4pbhqf403wx0c3dyia, .table th.tinytable_css_7d4pbhqf403wx0c3dyia { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_5yhcotgvua4h7lceuw6l, .table th.tinytable_css_5yhcotgvua4h7lceuw6l { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_35eo15dquags8x4qatjz, .table th.tinytable_css_35eo15dquags8x4qatjz { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_xx1zgyz6jocp066tk7px" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="2">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>(Intercept)</td>
                  <td>5.146***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.230)</td>
                </tr>
                <tr>
                  <td>lrscale</td>
                  <td>0.136**</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.048)</td>
                </tr>
                <tr>
                  <td>country_name_FBelgium</td>
                  <td>-0.550***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.012)</td>
                </tr>
                <tr>
                  <td>country_name_FBulgaria</td>
                  <td>-2.415***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.022)</td>
                </tr>
                <tr>
                  <td>country_name_FCroatia</td>
                  <td>-1.349***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.018)</td>
                </tr>
                <tr>
                  <td>country_name_FCyprus</td>
                  <td>-1.273***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.021)</td>
                </tr>
                <tr>
                  <td>country_name_FFinland</td>
                  <td>0.885***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.035)</td>
                </tr>
                <tr>
                  <td>country_name_FFrance</td>
                  <td>-1.531***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.010)</td>
                </tr>
                <tr>
                  <td>country_name_FGermany</td>
                  <td>-0.060***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.013)</td>
                </tr>
                <tr>
                  <td>country_name_FGreece</td>
                  <td>-1.620***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.023)</td>
                </tr>
                <tr>
                  <td>country_name_FHungary</td>
                  <td>-1.353***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.040)</td>
                </tr>
                <tr>
                  <td>country_name_FIceland</td>
                  <td>0.121***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.001)</td>
                </tr>
                <tr>
                  <td>country_name_FIreland</td>
                  <td>0.098***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.005)</td>
                </tr>
                <tr>
                  <td>country_name_FIsrael</td>
                  <td>-1.733***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.055)</td>
                </tr>
                <tr>
                  <td>country_name_FItaly</td>
                  <td>-0.736***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.016)</td>
                </tr>
                <tr>
                  <td>country_name_FLatvia</td>
                  <td>-1.313***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.052)</td>
                </tr>
                <tr>
                  <td>country_name_FLithuania</td>
                  <td>-1.003***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.019)</td>
                </tr>
                <tr>
                  <td>country_name_FMontenegro</td>
                  <td>-1.307***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.029)</td>
                </tr>
                <tr>
                  <td>country_name_FNetherlands</td>
                  <td>0.172***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.010)</td>
                </tr>
                <tr>
                  <td>country_name_FNorway</td>
                  <td>1.343***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.015)</td>
                </tr>
                <tr>
                  <td>country_name_FPoland</td>
                  <td>-0.672***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.034)</td>
                </tr>
                <tr>
                  <td>country_name_FPortugal</td>
                  <td>-0.946***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.005)</td>
                </tr>
                <tr>
                  <td>country_name_FSerbia</td>
                  <td>-1.741***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.008)</td>
                </tr>
                <tr>
                  <td>country_name_FSlovakia</td>
                  <td>-1.230***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.014)</td>
                </tr>
                <tr>
                  <td>country_name_FSlovenia</td>
                  <td>-0.811***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.003)</td>
                </tr>
                <tr>
                  <td>country_name_FSpain</td>
                  <td>-1.019***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.008)</td>
                </tr>
                <tr>
                  <td>country_name_FSweden</td>
                  <td>0.799***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.002)</td>
                </tr>
                <tr>
                  <td>country_name_FSwitzerland</td>
                  <td>1.710***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.011)</td>
                </tr>
                <tr>
                  <td>country_name_FUnited Kingdom</td>
                  <td>-1.327***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.008)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>39522</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.160</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.160</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<dl>
<dt><code>vcov = \~country_name_F</code></dt>
<dd>
<p>Met deze optie vragen we om geclusterde standaardfouten te berekenen voor ons model. De clustervariabele moet aangeduid worden in de syntax.</p>
</dd>
</dl>
<p>We kunnen de <code>vcov</code> optie ook gebruiken voor voorspellingen en marginal effects binnen de <code>avg_slopes</code> en <code>predictions</code> functies:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predictions</span>(demsatis_model2, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">lrscale =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)), </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">vcov =</span> <span class="sc">~</span>country_name_F) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> lrscale, <span class="at">y =</span> estimate)) <span class="sc">+</span> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Voorspelde waarden met geclusterde standaardfouten"</span>, </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Links-rechtspositionering"</span>, </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Voorspelde tevredenheid met democratie"</span>) <span class="sc">+</span> </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)) <span class="sc">+</span> </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="errors_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Presentatie
</div>
</div>
<div class="callout-body-container callout-body">
<p>Met de <code>modelsummary</code> functie hierboven creëerden we een regressietabel met de coëfficiënten voor alle `country_name_F’- categorieën. Als er echter heel veel dummies zijn (en die dummies zijn ook minder relevant voor de interpetatie), dan worden ze vaak weggelaten in de output. Wel moet je in de notitie aan de lezer verduidelijken dat ‘fixed effects’ en geclusterde standaardfouten werden gebruikt.</p>
<p>We gebruiken <code>coef_map</code> om bepaalde coëfficiënten weg te kunnen laten in de output (zie <a href="interaction_01.html#sec-interaction-term-in-a-regression-table" class="quarto-xref"><span>Paragraaf 15.2</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  demsatis_model2, </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> T, </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vcov =</span> <span class="sc">~</span>country_name_F, </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">coef_map =</span> <span class="fu">c</span>(<span class="st">"(Intercept)"</span> <span class="ot">=</span> <span class="st">"Constante"</span>, </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"lrscale"</span> <span class="ot">=</span> <span class="st">"Links-Rechtspositie"</span>),</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>),</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Democratische tevredenheid en links-rechtspositie"</span>, </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> <span class="st">"Lineaire regressiecoëfficiënten met geclusterde standaardfouten tussen haakjes. Model geschat met country fixed effects."</span>)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_yn137h4nw1okh9tjtoq2(i, j, css_id) {
          var table = document.getElementById("tinytable_yn137h4nw1okh9tjtoq2");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_yn137h4nw1okh9tjtoq2');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_yn137h4nw1okh9tjtoq2(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_yn137h4nw1okh9tjtoq2");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 4, j: 0 },  ], css_id: 'tinytable_css_zatv4rlfeo9pgwk26yg2',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_oqjilux1acgoeuphsd0i',}, 
          { positions: [ { i: 4, j: 1 },  ], css_id: 'tinytable_css_nfdpr347apx19acbnvzh',}, 
          { positions: [ { i: 7, j: 0 },  ], css_id: 'tinytable_css_m2gmcyg3w5bgzcca4j2p',}, 
          { positions: [ { i: 7, j: 1 },  ], css_id: 'tinytable_css_kjnk3x6u60yz57sfr704',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 },  ], css_id: 'tinytable_css_gg4makszpdjmi6m4ewzl',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 },  ], css_id: 'tinytable_css_d3aces497msv74tq9z35',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_2vgg7kk56wew2oua9xzf',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_yn137h4nw1okh9tjtoq2(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_zatv4rlfeo9pgwk26yg2, .table th.tinytable_css_zatv4rlfeo9pgwk26yg2 { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_oqjilux1acgoeuphsd0i, .table th.tinytable_css_oqjilux1acgoeuphsd0i { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_nfdpr347apx19acbnvzh, .table th.tinytable_css_nfdpr347apx19acbnvzh { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_m2gmcyg3w5bgzcca4j2p, .table th.tinytable_css_m2gmcyg3w5bgzcca4j2p { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_kjnk3x6u60yz57sfr704, .table th.tinytable_css_kjnk3x6u60yz57sfr704 { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_gg4makszpdjmi6m4ewzl, .table th.tinytable_css_gg4makszpdjmi6m4ewzl { text-align: center; }
      .table td.tinytable_css_d3aces497msv74tq9z35, .table th.tinytable_css_d3aces497msv74tq9z35 { text-align: left; }
      .table td.tinytable_css_2vgg7kk56wew2oua9xzf, .table th.tinytable_css_2vgg7kk56wew2oua9xzf { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_yn137h4nw1okh9tjtoq2" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        </thead><caption>Democratische tevredenheid en links-rechtspositie</caption>
              <tbody><tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        
        </tbody><tfoot><tr><td colspan="2">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr>
<tr><td colspan="2">Lineaire regressiecoëfficiënten met geclusterde standaardfouten tussen haakjes. Model geschat met country fixed effects.</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>Constante</td>
                  <td>5.146***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.230)</td>
                </tr>
                <tr>
                  <td>Links-Rechtspositie</td>
                  <td>0.136**</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.048)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>39522</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.160</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.160</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</div>
</div>
</section>
<section id="probleem-2-data-over-de-tijd-heen-en-seriële-autocorrelatie" class="level3 page-columns page-full" data-number="D.3.3">
<h3 data-number="D.3.3" class="anchored" data-anchor-id="probleem-2-data-over-de-tijd-heen-en-seriële-autocorrelatie"><span class="header-section-number">D.3.3</span> Probleem 2: Data over de tijd heen en seriële autocorrelatie</h3>
<p>De assumptie van onafhankelijke fouten kan ook geschonden worden als we dezelfde eenheid (bv. een persoon, land, bedrijf) observeren over meerder punten in de tijd. Dit wordt ‘time-series’ data genoemd.</p>
<p>Stel bijvoorbeeld dat we geïnteresseerd zijn in de relatie tussen welvaart en democratie in een land. We maken hier gebruik van V-Dem data en kijken naar de relatie tussen welvaart van een land (<code>e_gdp</code>) en democratiescore (<code>v2x_polyarchy</code>). We richten ons eerst op Nederland. Hieronder tonen we hoe de data eruit ziet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Filteren op Nederland</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>netherlands <span class="ot">&lt;-</span> serial_data <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country_name <span class="sc">==</span> <span class="st">"Netherlands"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#eerste 15 rijen in de dataset bekijken</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(netherlands, <span class="at">n =</span> <span class="dv">15</span>L)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   country_name year v2x_polyarchy    e_gdp
1   Netherlands 1789         0.076 2309.141
2   Netherlands 1790         0.076 2362.091
3   Netherlands 1791         0.076 2411.786
4   Netherlands 1792         0.076 2454.337
5   Netherlands 1793         0.076 2481.157
6   Netherlands 1794         0.076 2485.290
7   Netherlands 1795         0.097 2463.161
8   Netherlands 1796         0.133 2486.460
9   Netherlands 1797         0.181 2491.454
10  Netherlands 1798         0.179 2447.313
11  Netherlands 1799         0.127 2358.512
12  Netherlands 1800         0.127 2249.312
13  Netherlands 1801         0.127 2283.304
14  Netherlands 1802         0.127 2304.492
15  Netherlands 1803         0.127 2283.129</code></pre>
</div>
</div>
<p>De dataset meet de variabelen vanaf 1789. Maar vinden we een relatie tussen de twee variabelen? Gaat hogere welvaart gepaard met meer democratie? We kunnen een lineaire regressie schatten om dit te proberen nagaan. We beperken ons hier tot een bivariate analyse. In de praktijk zou je ook op zoek willen gaan naar controlevariabelen.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Het model</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>neth_model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(v2x_polyarchy <span class="sc">~</span> e_gdp, <span class="at">data =</span> netherlands)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Coëfficiënt bekijken</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(neth_model1, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 7
  term          estimate   std.error statistic  p.value   conf.low  conf.high
  &lt;chr&gt;            &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 (Intercept) 0.355      0.0166           21.4 2.14e-56 0.323      0.388     
2 e_gdp       0.00000384 0.000000255      15.0 5.82e-36 0.00000334 0.00000434</code></pre>
</div>
</div>
<p>De coëfficiënt voor <code>e_gdp</code> is positief. Het getal is erg klein, maar dit betekent niet noodzakelijk een klein effect gezien de predictor hier een sterke spreiding heeft. De coëfficiënt is ook statistisch significant.</p>
<p>Echter moeten we opletten: onze observaties zijn allemaal gelinkt aan hetzelfde land en zijn dus niet onafhankelijk. Dit betekent vaak dat we de standaardfouten onderschatten en we kunnen zo onterecht significate effecten vinden.</p>
<p>Dit probleem is gekend als seriële autocorrelatie: de errors van het model zijn gecorreleerd met elkaar over de tijd heen. Een error op tijdstip <em>t</em> is systematisch gerelateerd aan de error van het jaar voordien, <em>t-1</em>. Dit is logisch gezien de welvaart en het democratisch gehalte van een land vrij stabiel zijn en afhangen van onderliggende condities zoals economische instituties, natuurlijke rijkdommen enz. Deze factoren fluctueren niet zo sterk over de tijd heen waardoor opeenvolgende errors vaak lijken op elkaar.</p>
<p>We kunnen formeel nagaan of er seriële autocorrelatie aanwezig is met behulp van de Durbin-Watson statistiek zoals besproken in <a href="linear_07.html" class="quarto-xref"><span>Hoofdstuk 7</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-18"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="1">1</button><span id="annotated-cell-18-1" class="code-annotation-target"><a href="#annotated-cell-18-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">durbinWatsonTest</span>(neth_model1)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-18" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="1" data-code-annotation="1">Het <code>car::</code> prefix staat ons hier toe om het <code>car</code>package te gebruiken zonder het te moeten laden. Dit heeft voordelen gezien <code>car</code>ook funties heeft die conflicteren met andere functies die we gebruiken, in het bijzonder de <code>recode</code> functie uit het <code>dplyr</code>/<code>tidyverse</code> package.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> lag Autocorrelation D-W Statistic p-value
   1       0.9667039    0.05304265       0
 Alternative hypothesis: rho != 0</code></pre>
</div>
</div>
<p>De Autocorrelation kolom geeft de correlatie weer tussen errors van het ene jaar op het andere. De correlatie is 0.97. Dit is hoog, gezien het maximum +1 is. De D-W Statistic test formeel of de autocorrelatie te hoog is. Dit is het geval als D-W hoger is dan 3 of kleiner dan 1. Hier is het duidelijk lager dan 1 (0.053). De p-waarde is extreem klein en dus verwerpen we de nulhypothese dat er geen autocorrelatie is. De standaardfouten zijn niet correct.</p>
<p>We kunnen dit probleem oplossen door een ‘vertraagde afhankelijke variabele’ (‘lagged dependent variable’) toe te voegen als predictor in ons model. Deze vertraagde afhankelijke variabele bevat voor elke observatie de score voor de afhankelijke variabele in het onmiddellijk voorgaande tijdspunt. Door deze variabele op te nemen wordt het probleem van stabiliteit/inertie in de afhankelijke variabele (en gecorreleerde errors) verholpen.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<section id="lagged-dependent-variables-maken" class="level4 page-columns page-full" data-number="D.3.3.1">
<h4 data-number="D.3.3.1" class="anchored" data-anchor-id="lagged-dependent-variables-maken"><span class="header-section-number">D.3.3.1</span> Lagged Dependent Variables maken</h4>
<p>We kunnen de <code>lag()</code> functie gebruiken om onze afhankelijke variabele te ‘vertragen’ voor een nieuw aangemaakte variabele.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>netherlands <span class="ot">&lt;-</span> netherlands <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dem_lag =</span> <span class="fu">lag</span>(v2x_polyarchy, <span class="dv">1</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<dl>
<dt><code>lag(v2x_polyarchy, 1)</code></dt>
<dd>
<p>We gebruiken de functie <code>lag</code> op de relevante afhankelijke variabele (hier, <code>v2x_polyarchy</code>). Het nummer aan het einde van de functie geeft weer hoeveel eenheden vertraging we willen. Met het cijfer 1 zeggen we 1 tijdseenheid (hier: 1 jaar). Dit is het meest gebruikelijk. Indien we de <code>v2x_polyarchy</code> score van 2 jaar terug zouden willen, dan schrijven we ‘2’ enzovoort.</p>
</dd>
</dl>
<p>Laten we even kijken wat dat doet:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(netherlands, <span class="at">n =</span> <span class="dv">15</span>L)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   country_name year v2x_polyarchy    e_gdp dem_lag
1   Netherlands 1789         0.076 2309.141      NA
2   Netherlands 1790         0.076 2362.091   0.076
3   Netherlands 1791         0.076 2411.786   0.076
4   Netherlands 1792         0.076 2454.337   0.076
5   Netherlands 1793         0.076 2481.157   0.076
6   Netherlands 1794         0.076 2485.290   0.076
7   Netherlands 1795         0.097 2463.161   0.076
8   Netherlands 1796         0.133 2486.460   0.097
9   Netherlands 1797         0.181 2491.454   0.133
10  Netherlands 1798         0.179 2447.313   0.181
11  Netherlands 1799         0.127 2358.512   0.179
12  Netherlands 1800         0.127 2249.312   0.127
13  Netherlands 1801         0.127 2283.304   0.127
14  Netherlands 1802         0.127 2304.492   0.127
15  Netherlands 1803         0.127 2283.129   0.127</code></pre>
</div>
</div>
<p>Elke rij in de dataset bevat waarden per uniek jaar (1789, 1790, …). <code>v2x_polyarchy</code> geeft de democratiescore van het land in het betreffende jaar. De nieuwe kolom (<code>dem_lag</code>) geeft de score in het <em>voorgaande jaar</em>. De waarde voor <code>dem_lag</code> in rij 9 (year = 1797) is 0.133; dis was de waarde voor democratie in 1796 (rij 8).We zien NA in de eerste rij gezien we geen voorgaande data hebben.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Waarschuwing!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Het spreekt voor zich dat de dataset eerst netjes geordend moet zijn op jaar vooraleer we functies zoals <code>car::durbinWatsonTest</code>en <code>lag</code> kunnen gebruiken. Hoe je een dataset kan ordenen (indien nodig) wordt besproken in <a href="linear_07.html" class="quarto-xref"><span>Hoofdstuk 7</span></a>.</p>
</div>
</div>
<p>We voegen nu de lagged dependent variabele toe als predictor aan ons origineel model</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Het nieuwe model</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>neth_model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(v2x_polyarchy <span class="sc">~</span> e_gdp <span class="sc">+</span> dem_lag, <span class="at">data =</span> netherlands)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Coëfficiënten opvragen</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(neth_model2, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 7
  term            estimate    std.error statistic   p.value   conf.low conf.high
  &lt;chr&gt;              &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept) 0.0121       0.00667          1.81  7.20e-  2   -1.09e-3   2.52e-2
2 e_gdp       0.0000000561 0.0000000838     0.669 5.04e-  1   -1.09e-7   2.21e-7
3 dem_lag     0.978        0.0155          63.3   2.53e-145    9.48e-1   1.01e+0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Opvragen model fit statistieken via broom::glance()</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(neth_model2)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squared  sigma statistic   p.value    df logLik   AIC   BIC
      &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     0.973         0.973 0.0486     4110. 7.47e-178     2   367. -727. -713.
# ℹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
</div>
</div>
<p>De coëfficiënt voor <code>dem_lag</code> is 0.978. Dit is hoog, onze afhankelijke variabele heeft een bereik van 0 tot 1. De coëfficiënt toont dus dat er sterke stabiliteit is tussen democratiescores in opeenvolgende jaren. <a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> We vinden dan ook dat de R<sup>2</sup> statistieken dichtbij hun maxima van 1 zitten: toevoeging van de lagged dependent variable verklaart bijna alle variatie in democratiescore.</p>
<p>De coëfficiënt voor <code>e_gdp</code> toont de associate tussen BBP en democratiescores gecontroleerd voor democratiescore in het voorgaande jaar. Dit vertelt ons eigenlijk of BBP gerelataard is aan <em>verandering in democratiescore</em> van jaar tot jaar. De coëfficiënt is positief, maar niet langer significant.</p>
<p>Hebben we daarmee het probleem van autocorrelatie opgelost? We gaan het na:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">durbinWatsonTest</span>(neth_model2) </span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> lag Autocorrelation D-W Statistic p-value
   1       0.2865016      1.425975   0.006
 Alternative hypothesis: rho != 0</code></pre>
</div>
</div>
<p>Autocorrelatie bedraagt nu slechts 0.29, wat veel lager is dan de 0.97 in het voorgaande model. De D-W statistiek bevindt zich nu tussen 1 en 3. Er is nog autocorrelatie (zie de ook de p-waarde), maar we hebben al veel in rekening gebracht.</p>
<p>Voorgaand voorbeeld was gericht op 1 land, namelijk Nederland. In het geval we meerdere landen hebben kunnen we ook de <code>lag</code> functie gebruiken, maar er zal wel een probleem optreden waar we ons van bewust moeten zijn. We tonen eerst wat het probleem is en bieden dan een oplossing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-24"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-24-1"><a href="#annotated-cell-24-1" aria-hidden="true" tabindex="-1"></a>serial_data <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-24-2"><a href="#annotated-cell-24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dem_lag =</span> <span class="fu">lag</span>(v2x_polyarchy)) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-24" data-target-annotation="1">1</button><span id="annotated-cell-24-3" class="code-annotation-target"><a href="#annotated-cell-24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">225</span><span class="sc">:</span><span class="dv">235</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-24" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-24" data-code-lines="3" data-code-annotation="1">Deze syntax vraagt R om de data te ‘snijden’ en data te tonen voor rij 225 tot en met 235.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   country_name year v2x_polyarchy      e_gdp dem_lag
1        Mexico 2013         0.623 423815.579   0.649
2        Mexico 2014         0.620 429987.309   0.623
3        Mexico 2015         0.639 432220.100   0.620
4        Mexico 2016         0.640 440041.959   0.639
5        Mexico 2017         0.635 449152.118   0.640
6        Mexico 2018         0.675 455569.106   0.635
7        Mexico 2019         0.685 456743.982   0.675
8      Suriname 1960         0.526    237.768   0.685
9      Suriname 1961         0.526    244.437   0.526
10     Suriname 1962         0.526    255.809   0.526
11     Suriname 1963         0.527    272.408   0.526</code></pre>
</div>
</div>
<p>We tonen hier de transitie in de dataset van Mexico naar Suriname. In rij 7 bevind zich de data voor Mexico voor het laats beschikbare jaar 2019. Dan springt de dataset naar het eerste jaar voor Suriname, namelijk 1960. Als we kijken naar de <code>dem_lag</code> variabele zien we dat Suriname in 1960 de democratiescore van Mexico in 2019 heeft meegekregen. Dat mag natuurlijk niet. Zonder correctie doet R dit voor alle punten in de dataset waar we van 1 land naar een ander land gaan.</p>
<p>We vermijden dit door de <code>group_by()</code> functie te gebruiken:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>serial_data <span class="ot">&lt;-</span> serial_data <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name) <span class="sc">|&gt;</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dem_lag =</span> <span class="fu">lag</span>(v2x_polyarchy)) <span class="sc">|&gt;</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<dl class="page-columns page-full">
<dt><code>group_by(country_name)</code></dt>
<dd class="page-columns page-full">
<p>De <code>group_by()</code> functie vraagt R om de dataset eerst te groeperen volgens de variabele tussen haakjes (hier: country_name). Daarna pas wordt de <code>lag</code>functie, via <code>mutate()</code>, toegepast. Wat er precies gebeurt kun je zien met deze gif van <a href="https://www.andrewheiss.com/blog/2024/04/04/group_by-summarize-ungroup-animations/" target="_blank">Andrew Heiss</a> <span class="citation" data-cites="heiss2024">(<a href="#ref-heiss2024" role="doc-biblioref">2024</a>)</span>:</p>
<div class="no-row-height column-margin column-container"><div id="ref-heiss2024" class="csl-entry" role="listitem">
Heiss, Andrew. 2024. <span>‘Visualizing {Dplyr}’s Mutate(), Summarize(), Group_by(), and Ungroup() with Animations’</span>. 4 april 2024. <a href="https://doi.org/10.59350/d2sz4-w4e25">https://doi.org/10.59350/d2sz4-w4e25</a>.
</div></div></dd>
</dl>
<div class="quarto-video"><video id="video_shortcode_videojs_video1" class="video-js vjs-default-skin vjs-fluid" controls="" preload="auto" data-setup="{}" title=""><source src="figures/grp-mutate.mp4"></video></div>
<dl>
<dt><code>ungroup()</code></dt>
<dd>
<p>Deze functie is nodig om <code>mutate</code> te vertellen dat we niet langer willen groeperen voor toekomstige toepassingen van de functie. Anders blijft <code>mutate</code> verdere bewerkingen per groep uitvoeren.</p>
</dd>
</dl>
<p>Laten we bekijken wat er gebeurt is</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>serial_data <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">225</span><span class="sc">:</span><span class="dv">235</span>)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 5
   country_name  year v2x_polyarchy   e_gdp dem_lag
   &lt;chr&gt;        &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 Mexico        2013         0.623 423816.   0.649
 2 Mexico        2014         0.62  429987.   0.623
 3 Mexico        2015         0.639 432220.   0.62 
 4 Mexico        2016         0.64  440042.   0.639
 5 Mexico        2017         0.635 449152.   0.64 
 6 Mexico        2018         0.675 455569.   0.635
 7 Mexico        2019         0.685 456744.   0.675
 8 Suriname      1960         0.526    238.  NA    
 9 Suriname      1961         0.526    244.   0.526
10 Suriname      1962         0.526    256.   0.526
11 Suriname      1963         0.527    272.   0.526</code></pre>
</div>
</div>
<p>We zien nu een NA waarde in rij 8, het eerste beschikbare jaar voor Suriname. Dit is wat we willen.</p>
<p>We zouden nu de regressie opnieuw kunnen uitvoeren. Onze dataset heeft nu echter niet alleen een time series element, maar bevat ook geclusterde data want meerdere landen zijn opgenomen. We zullen de lagged dependent variable-techniek dus moeten combineren met bovenstaande technieken voor clustering (fixed effects en geclusterde standaardfouten).</p>
</section>
</section>
</section>
<section id="omgaan-met-niet-normaal-verdeelde-residuals" class="level2" data-number="D.4">
<h2 data-number="D.4" class="anchored" data-anchor-id="omgaan-met-niet-normaal-verdeelde-residuals"><span class="header-section-number">D.4</span> Omgaan met niet-normaal verdeelde residuals</h2>
<section id="wat-was-het-probleem-ook-al-weer-1" class="level3" data-number="D.4.1">
<h3 data-number="D.4.1" class="anchored" data-anchor-id="wat-was-het-probleem-ook-al-weer-1"><span class="header-section-number">D.4.1</span> Wat was het probleem ook al weer?</h3>
<p>De laatste assumptie die we hier bekijken stelt dat de errors/residuals/fouten in een OLS model normaal verdeeld zijn. Of aan deze assumptie voldaan is kunnen we nagaan met plots gemaakt via <code>resid_panel()</code>: een histogram van de residuals en een Q-Q plot van de residuals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model schatten</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>norm_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(v2x_polyarchy <span class="sc">~</span> gini_disp <span class="sc">+</span> pr_fct <span class="sc">+</span> region1, <span class="at">data =</span> normal_residual_data)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Coëfficiënten opvragen</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(norm_model, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  term            estimate std.error statistic p.value conf.low conf.high
  &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)      0.641     0.195       3.29  0.00154   0.253    1.03   
2 gini_disp       -0.00492   0.00531    -0.928 0.357    -0.0155   0.00566
3 pr_fctPR System  0.0831    0.0619      1.34  0.184    -0.0404   0.207  
4 region1Africa   -0.0940    0.114      -0.824 0.413    -0.321    0.133  
5 region1Europe    0.176     0.0665      2.65  0.00997   0.0435   0.309  
6 region1Americas  0.168     0.0710      2.37  0.0207    0.0265   0.310  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumptie checken</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">resid_panel</span>(norm_model, <span class="at">plots =</span> <span class="fu">c</span>(<span class="st">"hist"</span>, <span class="st">"qq"</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="errors_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Beide grafieken leiden tot dezelfde vaststelling: de assumptie is geschonden (zie <a href="linear_07.html" class="quarto-xref"><span>Hoofdstuk 7</span></a>). Met een relatief grote steekproef is een schending van deze assumptie doorgaans geen probleem. In kleine steekproeven kan dit wel problematisch zijn. Hier zien we met de <code>glance()</code> functie uit het <code>broom</code> package dat we met een kleine steekproef te maken hebben:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(norm_model)<span class="sc">$</span>nobs</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 77</code></pre>
</div>
</div>
<p>We hebben 77 observaties in het model. Is dit klein of groot genoeg? Jammergenoeg bestaat hier geen eenduidig antwoord voor. Een vuistregel is dat we met een kleine steekproef te maken hebben bij minder dan 15 observaties per onafhankelijke variabele. Hier hebben we 5 predictors. We vinden dan dat we met 77 observaties net 2 meer hebben dan de vuistregel voorschrijft (5 * 15 = 75). Dit is echter dicht bij de grens, dus misschien is het toch veiliger om rekening te houden met een assumptieschending.</p>
</section>
<section id="mogelijke-oplossing-bootstrapping" class="level3" data-number="D.4.2">
<h3 data-number="D.4.2" class="anchored" data-anchor-id="mogelijke-oplossing-bootstrapping"><span class="header-section-number">D.4.2</span> Mogelijke oplossing: bootstrapping</h3>
<p>Ook voor een schending van deze assumptie (met een kleine steekproef) moeten we de standaardfouten herberekenen. We gebruiken in dit geval weer een andere herberekening dan hierboven, namelijk ‘gebootstrapte’ standaardfouten. Met bootstrapping worden standaardfouten herschat met de volgende procedure:</p>
<p>We nemen een steekproef van de oorspronkelijke steekproef met dezelfde grootte. Dit gebeurt met teruglegging van de observaties, dat wil zeggen 1 observatie kan meerdere malen opgenomen worden in de nieuwe steekproef. Dat moet natuurlijk, anders kom je gewoon telkens dezelfde steekproef uit. Op basis van de nieuwe steekproef schatten we coëfficiënt en standaardfout opnieuw en slagen de resultaten op. Dit doen we een aantal keren. Ten slotte kijken we naar alle verschillende coëfficiënten die we uitgekomen zijn en in het bijzonder naar de standaardafwijking van de verzameling coëfficiënten. Deze standaardafwijking wordt de ’gebootstrapte’standaardfout.</p>
<p>Ook deze standaardfout kunnen we bekomen met de <code>vcov=</code> optie in de <code>modelsummary()</code> syntax. Wat nieuw is hier is dat we een element van toeval toevoegen in de berekening: R gaat ‘random’ nieuwe steekproeven trekken. Op zich is dit goed -moeten wij het niet doen!- maar juist door dit toevalselement kan de uitkomst telkens licht anders zijn. Om resultaten reproduceerbaar te houden zetten we hier dan ook een ‘seed’: een seed is een zelfgekozen startgeval (je kan 1 gebruiken maar ook je verjaardag enz.). Met de seed houdt R bij welke steekproeven precies getrokken werden en worden telkens dezelfde resultaten bereikt. Voor je je seed vastlegt wil je wel eerst nagaan of je met hetzelfde aantal steekproeven sterk verschillende resultaten uitkomt, want in dat geval vraag je R best meer steekproeven te trekken voor betere schattingen, zie onder).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seed vastleggen</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Model schatten </span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(norm_model, </span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">stars =</span> T, </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"bootstrap"</span>, </span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_vkmafstgktf1dfxmi2aw(i, j, css_id) {
          var table = document.getElementById("tinytable_vkmafstgktf1dfxmi2aw");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_vkmafstgktf1dfxmi2aw');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_vkmafstgktf1dfxmi2aw(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_vkmafstgktf1dfxmi2aw");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 10, j: 0 }, { i: 11, j: 0 }, { i: 13, j: 0 }, { i: 14, j: 0 },  ], css_id: 'tinytable_css_z43uej0t66jeh1refrc6',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 10, j: 1 }, { i: 11, j: 1 }, { i: 13, j: 1 }, { i: 14, j: 1 },  ], css_id: 'tinytable_css_ytbuf0plygvhzzysw9z0',}, 
          { positions: [ { i: 12, j: 1 },  ], css_id: 'tinytable_css_ro04r08jmmtxibs19y6v',}, 
          { positions: [ { i: 15, j: 0 },  ], css_id: 'tinytable_css_qa6kl0u3f3x17nwkzwen',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_linihbawaah4imiuabqj',}, 
          { positions: [ { i: 12, j: 0 },  ], css_id: 'tinytable_css_9huqanmwbj5uzp9624ai',}, 
          { positions: [ { i: 15, j: 1 },  ], css_id: 'tinytable_css_7fsjl6dv4ltl5j6j30x1',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_6fzz71m70kygs9j5evn3',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_vkmafstgktf1dfxmi2aw(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_z43uej0t66jeh1refrc6, .table th.tinytable_css_z43uej0t66jeh1refrc6 { text-align: left; }
      .table td.tinytable_css_ytbuf0plygvhzzysw9z0, .table th.tinytable_css_ytbuf0plygvhzzysw9z0 { text-align: center; }
      .table td.tinytable_css_ro04r08jmmtxibs19y6v, .table th.tinytable_css_ro04r08jmmtxibs19y6v { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_qa6kl0u3f3x17nwkzwen, .table th.tinytable_css_qa6kl0u3f3x17nwkzwen { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_linihbawaah4imiuabqj, .table th.tinytable_css_linihbawaah4imiuabqj { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_9huqanmwbj5uzp9624ai, .table th.tinytable_css_9huqanmwbj5uzp9624ai { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_7fsjl6dv4ltl5j6j30x1, .table th.tinytable_css_7fsjl6dv4ltl5j6j30x1 { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_6fzz71m70kygs9j5evn3, .table th.tinytable_css_6fzz71m70kygs9j5evn3 { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_vkmafstgktf1dfxmi2aw" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="2">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>(Intercept)</td>
                  <td>0.641**</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.230)</td>
                </tr>
                <tr>
                  <td>gini_disp</td>
                  <td>-0.005</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.006)</td>
                </tr>
                <tr>
                  <td>pr_fctPR System</td>
                  <td>0.083</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.082)</td>
                </tr>
                <tr>
                  <td>region1Africa</td>
                  <td>-0.094</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.100)</td>
                </tr>
                <tr>
                  <td>region1Europe</td>
                  <td>0.176*</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.079)</td>
                </tr>
                <tr>
                  <td>region1Americas</td>
                  <td>0.168*</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.080)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>77</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.305</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.256</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<dl>
<dt><code>set.seed(1)</code></dt>
<dd>
<p>We zetten het toevallig trekken van steekproeven hier vast met een zelfgekozen getal zodat resultaten dezelfde blijven.</p>
</dd>
<dt><code>vcov = "boostrap"</code></dt>
<dd>
<p>Deze optie vraagt om de ‘gebootstrapte’ standaarfouten.</p>
</dd>
</dl>
<p>We kunnen de standaardfouten vergelijken:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seed: zelfde als hierboven want dan krijgen we zelfde resultaten</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Modellen vergelijken</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(norm_model, </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">stars =</span> T, </span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="fu">c</span>(<span class="st">"classical"</span>, <span class="st">"bootstrap"</span>),</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_vkmafstgktf1dfxmi2aw(i, j, css_id) {
          var table = document.getElementById("tinytable_vkmafstgktf1dfxmi2aw");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_vkmafstgktf1dfxmi2aw');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_vkmafstgktf1dfxmi2aw(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_vkmafstgktf1dfxmi2aw");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 10, j: 0 }, { i: 11, j: 0 }, { i: 13, j: 0 }, { i: 14, j: 0 },  ], css_id: 'tinytable_css_z43uej0t66jeh1refrc6',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 10, j: 1 }, { i: 11, j: 1 }, { i: 9, j: 2 }, { i: 13, j: 1 }, { i: 14, j: 1 }, { i: 3, j: 2 }, { i: 3, j: 1 }, { i: 1, j: 2 }, { i: 2, j: 2 }, { i: 7, j: 2 }, { i: 4, j: 2 }, { i: 5, j: 2 }, { i: 6, j: 2 }, { i: 11, j: 2 }, { i: 8, j: 2 }, { i: 13, j: 2 }, { i: 10, j: 2 }, { i: 14, j: 2 },  ], css_id: 'tinytable_css_ytbuf0plygvhzzysw9z0',}, 
          { positions: [ { i: 12, j: 2 }, { i: 12, j: 1 },  ], css_id: 'tinytable_css_ro04r08jmmtxibs19y6v',}, 
          { positions: [ { i: 15, j: 0 },  ], css_id: 'tinytable_css_qa6kl0u3f3x17nwkzwen',}, 
          { positions: [ { i: 0, j: 1 }, { i: 0, j: 2 },  ], css_id: 'tinytable_css_linihbawaah4imiuabqj',}, 
          { positions: [ { i: 12, j: 0 },  ], css_id: 'tinytable_css_9huqanmwbj5uzp9624ai',}, 
          { positions: [ { i: 15, j: 1 }, { i: 15, j: 2 },  ], css_id: 'tinytable_css_7fsjl6dv4ltl5j6j30x1',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_6fzz71m70kygs9j5evn3',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_vkmafstgktf1dfxmi2aw(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_z43uej0t66jeh1refrc6, .table th.tinytable_css_z43uej0t66jeh1refrc6 { text-align: left; }
      .table td.tinytable_css_ytbuf0plygvhzzysw9z0, .table th.tinytable_css_ytbuf0plygvhzzysw9z0 { text-align: center; }
      .table td.tinytable_css_ro04r08jmmtxibs19y6v, .table th.tinytable_css_ro04r08jmmtxibs19y6v { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_qa6kl0u3f3x17nwkzwen, .table th.tinytable_css_qa6kl0u3f3x17nwkzwen { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_linihbawaah4imiuabqj, .table th.tinytable_css_linihbawaah4imiuabqj { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_9huqanmwbj5uzp9624ai, .table th.tinytable_css_9huqanmwbj5uzp9624ai { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_7fsjl6dv4ltl5j6j30x1, .table th.tinytable_css_7fsjl6dv4ltl5j6j30x1 { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_6fzz71m70kygs9j5evn3, .table th.tinytable_css_6fzz71m70kygs9j5evn3 { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_vkmafstgktf1dfxmi2aw" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
                <th scope="col">(2)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="3">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>(Intercept)</td>
                  <td>0.641**</td>
                  <td>0.641**</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.195)</td>
                  <td>(0.230)</td>
                </tr>
                <tr>
                  <td>gini_disp</td>
                  <td>-0.005</td>
                  <td>-0.005</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.005)</td>
                  <td>(0.006)</td>
                </tr>
                <tr>
                  <td>pr_fctPR System</td>
                  <td>0.083</td>
                  <td>0.083</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.062)</td>
                  <td>(0.082)</td>
                </tr>
                <tr>
                  <td>region1Africa</td>
                  <td>-0.094</td>
                  <td>-0.094</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.114)</td>
                  <td>(0.100)</td>
                </tr>
                <tr>
                  <td>region1Europe</td>
                  <td>0.176**</td>
                  <td>0.176*</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.067)</td>
                  <td>(0.079)</td>
                </tr>
                <tr>
                  <td>region1Americas</td>
                  <td>0.168*</td>
                  <td>0.168*</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.071)</td>
                  <td>(0.080)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>77</td>
                  <td>77</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.305</td>
                  <td>0.305</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.256</td>
                  <td>0.256</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<p>Wat merken we op:</p>
<ul>
<li>De coëfficiënten veranderen niet, enkel de standaardfouten. Dat zagen we ook bij heteroskedasticiteit-robuuste standaardfouten en geclusterde standaardfouten</li>
<li>De standaardfouten zijn verschillend. Doorgaans, maar niet altijd, zijn gebootstrapte standaardfouten groter.</li>
<li>Conclusies over de significantie van resultaten blijven hier dezelfde, hoewel we zien dat het significantieniveau voor de coëfficiënt van <code>region1Europe</code> veranderd is van p &lt; 0.01 naar p &lt; 0.05. De gevolgen kunnen veel groter zijn in andere analyses.</li>
</ul>
<p>Zoals gezegd neemt R zelf nieuwe toevalssteekproeven. Standaard worden 250 steekproeven genomen. Zoals eerder gezegd zet je een ‘seed’ om resultaten gelijk te houden, maar natuurlijk is het niet echt betrouwbaar als resultaten bij elke trekking sterk veranderen. Vooraleer te beslissen om je seed vast te leggen, wil je nagaan of resultaten sterk verschillen zonder seed. Als dit het geval is, wil je R vragen meer steekproeven te trekken om betere schattingen te maken van de standaardfouten. Dit doen we in onderstaande syntax door R om 1000 steekproeven te vragen. We zetten een seed in de syntax, maar ga ervanuit dat we eerst goed gekeken hebben naar verschillende uitkomsten vooraleer een seed te zetten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>) </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(norm_model, </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">stars =</span> T, </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"bootstrap"</span>, </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">R =</span> <span class="dv">1000</span>, </span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_a9n0dmwc3yte59unpwgn(i, j, css_id) {
          var table = document.getElementById("tinytable_a9n0dmwc3yte59unpwgn");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_a9n0dmwc3yte59unpwgn');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_a9n0dmwc3yte59unpwgn(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_a9n0dmwc3yte59unpwgn");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 12, j: 0 },  ], css_id: 'tinytable_css_qz91p7vsl3vumswgteif',}, 
          { positions: [ { i: 15, j: 1 },  ], css_id: 'tinytable_css_qj0tbkexod4inq3m0qwa',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_irkednloob3vrq1w5n5w',}, 
          { positions: [ { i: 15, j: 0 },  ], css_id: 'tinytable_css_hcqnq4enoc5m6eicbmep',}, 
          { positions: [ { i: 12, j: 1 },  ], css_id: 'tinytable_css_8juvk4v85u712zoq3t9n',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 10, j: 1 }, { i: 11, j: 1 }, { i: 13, j: 1 }, { i: 14, j: 1 },  ], css_id: 'tinytable_css_3em4ieutg9b9jh0wn0wd',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 10, j: 0 }, { i: 11, j: 0 }, { i: 13, j: 0 }, { i: 14, j: 0 },  ], css_id: 'tinytable_css_0x8571ipymezm5t8p41e',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_0iecoxh5nvlyzyh6fmv6',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_a9n0dmwc3yte59unpwgn(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_qz91p7vsl3vumswgteif, .table th.tinytable_css_qz91p7vsl3vumswgteif { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_qj0tbkexod4inq3m0qwa, .table th.tinytable_css_qj0tbkexod4inq3m0qwa { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_irkednloob3vrq1w5n5w, .table th.tinytable_css_irkednloob3vrq1w5n5w { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_hcqnq4enoc5m6eicbmep, .table th.tinytable_css_hcqnq4enoc5m6eicbmep { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_8juvk4v85u712zoq3t9n, .table th.tinytable_css_8juvk4v85u712zoq3t9n { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_3em4ieutg9b9jh0wn0wd, .table th.tinytable_css_3em4ieutg9b9jh0wn0wd { text-align: center; }
      .table td.tinytable_css_0x8571ipymezm5t8p41e, .table th.tinytable_css_0x8571ipymezm5t8p41e { text-align: left; }
      .table td.tinytable_css_0iecoxh5nvlyzyh6fmv6, .table th.tinytable_css_0iecoxh5nvlyzyh6fmv6 { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_a9n0dmwc3yte59unpwgn" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="2">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>(Intercept)</td>
                  <td>0.641**</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.216)</td>
                </tr>
                <tr>
                  <td>gini_disp</td>
                  <td>-0.005</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.006)</td>
                </tr>
                <tr>
                  <td>pr_fctPR System</td>
                  <td>0.083</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.079)</td>
                </tr>
                <tr>
                  <td>region1Africa</td>
                  <td>-0.094</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.101)</td>
                </tr>
                <tr>
                  <td>region1Europe</td>
                  <td>0.176*</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.076)</td>
                </tr>
                <tr>
                  <td>region1Americas</td>
                  <td>0.168*</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.081)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>77</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.305</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.256</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<dl>
<dt><code>R = 1000</code></dt>
<dd>
<p>Deze optie laat toe het aantal steekproeven dat R trekt aan te passen. Hier vragen we er 1000.</p>
</dd>
</dl>
<p>Onze resultaten hier zijn gelijkaardig, maar niet identiek aan deze gevonden bij 250 steekproeven. Het heeft echter geen gevolgen voor de algemene conclusies over significantie.</p>
<p>Bootstrapping kan ook gebruikt worden binnen het <code>marginaleffects</code> package, bv. wanneer we voorspelde waarden en betrouwbaarheidsintervallen nodig hebben. De functie om bootstrapping te gebruiken (<code>inferences()</code>) is echter nog steeds in ontwikkeling en je moet er ook bijkomende packages voor installeren. Indien je dit nodig zou hebben, bekijk dan het <a href="https://marginaleffects.com/bonus/bootstrap.html">“Bootstrap”</a> hoofdstuk op de <code>marginaleffects</code> website.</p>



</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Slechts een van deze assumpties is ook van toepassing op logistische modellen: de assumptie van onafhankelijke fouten. De oplossingen hiervoor zijn dezelfde bij logistische modellen, vandaar dat we ons in deze voorbeelden richten op OLS modellen.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Wel zien we dat er meer variatie is tussen individuen dan tussen landen. dat is wel vaker zo in dergelijke cross-nationale surveydatasets.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>We moeten er ook op letten dat er geen ‘ommitted variable bias’ optreedt. Hier gebruiken we bijvoorbeeld slechts 1 predictor en belangrijke controlevariabelen worden wellicht over het hoofd gezien.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Er bestaan eigenlijk ook twee andere strategieën. Het probleem hier wordt veroorzaakt door het samenbrengen (“poolen”) van gegevens uit verschillende landen (“clusters”). Het kan echter zijn dat we ons zorgen maken over één cluster in het bijzonder, bijvoorbeeld het doel van ons artikel kan zijn om de relatie tussen ideologie en democratische tevredenheid specifiek in Duitsland of in Nederland te onderzoeken, enz. Een “oplossing” is dan om waarnemingen uit de andere landen weg te filteren en enkel een model voor 1 land te schatten. Het kan ook zijn dat we niet echt geïnteresseerd zijn in het lagere niveau van de dataset (bijv. de individuen in dit voorbeeld) en eigenlijk meer geven om het verklaren van de variatie tussen clusters (bijv. waarom landen als Zwitserland een hogere democratische tevredenheid hebben dan landen als Bulgarije). Een optie hier is om het clustergemiddelde te gebruiken als onze afhankelijke variabele in een regressiemodel en dit te voorspellen met predictoren op landniveau (bv. BBP). Zoals altijd is de eerste stap in elke data-analyse uitzoeken <em>wat onze vraag is</em>, omdat dit een grote invloed heeft op het type analyse dat geschikt is om te leren wat we willen leren.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Deze strategie werkt ongeacht de hoeveelheid clusters die je hebt. De berekening kan wel langer duren bij een groter aantal clsuters. Stel dat we met longitudinale, panel-data werken van 500 respondenten die elke maand van het jaar bevraagd worden. Voor een ‘fixed effects’analyse betekent dit dat je 499 dummies toevoegd. Dit is best veel. In dit geval kun je ook specifieke packages gebruiken die speciaal ontworpen ziin voor ’fixed effects’ en vlugger werken, bijvoorbeeld het <a href="https://lrberge.github.io/fixest/">fixest</a> package met bijhorende <code>feols</code> functie. Deze functie gebruikt ook automatisch geclusterde standaardfouten.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Als we ons richten op controlevariabelen in het geval van 1 land dan moeten deze variëren over de tijd in Nederland (time-variant) en niet vaststaan (time-invariant).<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Er zijn nog andere manieren om dergelijke time series te modelleren, maar deze zijn te gevorderd voor dit handboek.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Hier maken we een vertraagde afhankelijke variable maar hetzelfde proces kan gebruikt worden voor <em>onafhankelijke</em> variabelen, bijvoorbeeld als er zorgen zijn over omgekeerde causale verbanden (‘reverse causality’).<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>De bivariate pearson correlatie tussen de twee variabelen is 0.99. Democratiescores in Nederland blijven erg stabiel van jaar tot jaar.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Gekopieerd!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Gekopieerd!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Formulas.html" class="pagination-link" aria-label="Formules">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Formules</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./scales.html" class="pagination-link" aria-label="Indexen en schalen">
        <span class="nav-page-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Indexen en schalen</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>videojs(video_shortcode_videojs_video1);</script>




</body></html>