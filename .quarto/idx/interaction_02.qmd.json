{"title":"Marginale Effecten in Interactiemodellen","markdown":{"yaml":{"code-annotations":"hover"},"headingText":"Marginale Effecten in Interactiemodellen","headingAttr":{"id":"sec-inter-marginal","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\n\n\n```{r}\n#| label: setup\n#| echo: false\n#| message: false\n#| warning: false\n\n#Packages\n\nlibrary(broom)        #Modelresultaten\nlibrary(rio)          #laden van data\nlibrary(tidyverse)    #datamanipulatie en grafieken\nlibrary(marginaleffects) #marginale effecten en voorspelde waarden berekenen\n\n\n#Data\nanes <- import(\"data/anes_interactions.rda\")\n\n#Modellen\nbiden_int <- lm(biden ~ pid * right_track + rural_urban, data = anes)\nrighttrack_int <- glm(right_track ~ vote2016 * age + rural_urban, \n                      family = \"binomial\", data = anes)\n```\n\n```{r}\n#| eval: false\n\n#Packages\nlibrary(broom)        #Modelresultaten\nlibrary(rio)          #laden van data\nlibrary(tidyverse)    #datamanipulatie en grafieken\nlibrary(marginaleffects) #marginale effecten en voorspelde waarden berekenen\n\n#Data\nanes <- import(\"data/anes_interactions.rda\")\n\n#Modellen\nbiden_int <- lm(biden ~ pid * right_track + rural_urban, data = anes)\nrighttrack_int <- glm(right_track ~ vote2016 * age + rural_urban, \n                      family = \"binomial\", data = anes)\n\n```\n\nIn het vorige hoofdstuk bespraken we hoe een interactieterm toe te voegen aan een regressiemodel. Zo kunnen we nagaan of het effect van een onafhankelijke variabele verschilt naargelang een andere onafhankelijke variabele andere waarden aanneemt:\n\n![](figures/Interaction.png){fig-align=\"center\"}\n\nIn dit model bekijken we bijvoorbeeld of iemands evaluatie van Joe Biden afhangt van partij-identificatie, oordeel of het land in de juiste of verkeerde richting gaat, en de interactie tussen deze 2 predictors.\n\n```{r}\ntidy(biden_int, conf.int = TRUE) \n```\n\nWat betekenen deze coëfficiënten nu? Het toevoegen van een interactieterm leidt tot andere interpretaties dan degene die we hiervoor hebben gezien in modellen zonder interacties.\n\n::: callout-warning\n#### Interpretatie\n\nDe coëfficiënten van de variabelen die de interactie opmaken interpreteren we niet op dezelfde manier als coëfficiënten die geen deel uitmaken van een interactie.\n\nStel bijvoorbeeld dat we het volgende model hebben: Y = Constante + Variabele 1 + Variabele 2 + (Variabele 1 \\* Variabele 2).\n\n-   Coëfficiënt voor Variabele 1 (bv., `pid`): het verband tussen de Variabele 1 en Y als Variabele 2 (bv., `right_track`) **gelijk is aan 0**.\n-   Coëfficiënt voor Variable 2 (bv., `right_track`): het verband tussen de Variabele 2 en Y als Variabele 1 (bv., `pid`) **gelijk is aan 0**.[^1]\n-   Coëfficiënt voor de interactievariabele (bv., `right_trackRight Direction`): Hoe verandert de regressiecoëfficiënt voor een van de variabelen in de interactie als de andere variabele met 1 eenheid stijgt?\n    -   1\\) Hoe verandert het verband tussen `pid` en `biden` als `right_track` met 1 eenheid stijgt? OF\n    -   2\\) Hoe verandert het verband tussen `right_track` en `biden` als `pid` met 1 eenheid stijgt?\n:::\n\n[^1]: Onze `pid` variabele heeft een bereik van 1 tot 7 en kent dus geen nulwaarde. Het effect wordt geëxtrapoleerd alsof er een nulwaarde zou zijn. Dit vormt niet echt een probleem.\n\nInteractietermen kunnen moeilijk zijn om te interpreteren op basis van de standaard output van een regressieanalyse. Het berekenen en plotten van *marginale effecten* kan de interpretatie vergemakkelijken voor jezelf en je lezers: Wat is de verwachte verandering in Y als X met 1 eenheid stijgt? Deze verandering drukken we uit in eenheden voor een continue Y (OLS) en in percenpunten kans voor een binaire Y. Bij een interactie-effect berekenen (en plotten) we de verwachte verandering in Y als X met 1 eenheid stijgt voor verschillende waarden van een andere predictor Z. We gebruiken de `slopes()` functie uit het `marginaleffects` package.\n\nWe geven hieronder voorbeelden voor verschillende types onafhankelijke variabelen (bv. binair *\\** continu, continu \\* continu etc).[^2]\n\n[^2]: We tonen geen voorbeeld voor een interactie met een categorische variabele met 3 of meer categorieën maar dezelfde principes als binaire variabelen worden gevolgd hiervoor.\n\n## Binaire X Continue Interactie\n\n### Berekening en interpretatie\n\nWe bekijken eerst hoe we de marginale effecten berekenen voor een interactie tussen een binaire en continue variabele. Dit was het geval voor ons 'biden_int' model waarin een interactie werd toegevoegd tussen partij-identificatie (pid, loopt van 1 'Overtuigd Democraat' tot 7 'Overtuigd Republikein') en right_track (waarbij '0' betekent dat een respondent vindt dat het de verkeerde richting uitgaat met het land en '1' dat het de goede richting uitgaat met het land).\n\nHier gebruiken we de `slopes()` functie om het effect van pid op Biden scores te berekenen voor elke waarde van right_track. Wanneer de moderator (Z) een factor variabele is, zoals hier het geval is, gebruiken we de volgende code:\n\n```{r}\nslopes(biden_int, \n       variables = \"pid\", \n       by = \"right_track\")\n```\n\n`slopes(biden_int,`\n\n:   We passen de functie `slopes` toe op het model tussen haakjes.\n\n`variables = \"pid\"`\n\n:   We duiden hier de onafhankelijke variabele aan waarvoor we de verschillende marginale effecten willen berekenen. Voor eigen toepassingen voeg je hier je eigen continue variabele toe.\n\n`by = \"right_track\"`\n\n:   Hier wordt de moderator variabele aangeduid. De code kan enkel gebruikt worden als de moderator een factor is.\n\nDe helling van de regressielijn voor `pid` als `right_track` = 'Right Direction'\" is -7.11. De helling van pid wanneer `right_track` = 'Wrong Track' is -10.82. Het effect van partij-identificatie op de score voor Biden is sterker (negatiever) als respondenten vinden dat het de verkeerde richting uitgaat met het land. Dit effect is ook statistisch significant (p \\< 0.001). Dit zien we aan de p-waarde voor de interactie-term (zie onder). We kunnen de nulhypothese verwerpen dat het effect van `pid` niet verschilt naargelang `right_track` andere waarden aanneemt.\n\nJe ziet ook dat het effect van `pid` als `right_track` = 'Wrong Track' gelijk is aan de coëfficiënt van `pid` in het model (dit effect geldt als moderator 0 is). Het verschil tussen de 2 marginale effecten is gelijk aan de waarde van de interactiecoëfficiënt.\n\n```{r}\n#resultaten om coëfficiënten en significantie te tonen\ntidy(biden_int) |> select(term, estimate, p.value)\n\n#Marginaal effect (Right Direction) - Marginaal effect (Wrong Track) = coëfficiënt van de interactieterm\n-7.11 - (-10.82)\n```\n\nWe kunnen ook onderzoeken hoe het effect van de factor variabele `right_track` op de afhankelijke variabele anders is voor verschillende waarden van partij-identificatie. We kiezen er hier voor de effecten te berekenen voor elke waarde van pid gezien er maar 7 waarden zijn.\n\n```{r}\nslopes(biden_int, \n       variables = \"right_track\", \n       newdata = datagrid(pid = c(1,2,3,4,5,6,7)))\n```\n\n`newdata = datagrid(pid = c(1,2,3,4,5,6,7)))`\n\n:   We geven hier de waarden op van de moderator waarvoor marginale effecten van de andere predictor berekend moeten worden. De waarden dien je te veranderen voor eigen toepassingen. We gebruiken \"newdata = datagrid()\" omdat pid hier als continue variabele wordt gebruikt.\n\nDe output hierboven toont dat het effect van `right_ direction'_track`ongeveer -29.47 punten is voor overtuigde Democraten (pid=1), -25.76 punten voor minder overtuigde Democraten (pid = 2), en -7.19 punten voor overtuigde Republikeinen (pid=7). Het effect van de `right_track` variabele daalt met 3.71 eenheden telkens als `pid`met 1 eenheid stijgt: dit is de waarde van de interactiecoëfficiënt.\n\n```{r}\n##resultaten om coëfficiënten en significantie te tonen\ntidy(biden_int) |> select(term, estimate, p.value)\n\n#Marginaal effect (PID = 2) - Marginaal effect (PID = 1) = coëfficiënt van de interactieterm\n-25.76 - (-29.47)\n\n#Marginaal effect (PID = 7) - Marginaal effect (PID = 6) = coëfficiënt van de interactieterm\n-7.19 - (-10.90)\n```\n\nDe statistisch significante interactieterm leidt ertoe dat we de nulhypothese verwerpen dat het effect van `right_track` gelijk blijft als `pid` verandert.\n\n### Plotten {#sec-ame-plotting}\n\nMarginale effecten worden vaak gevisualiseerd in een grafiek. De y-as in deze grafieken is het geschatte marginale effect van X op Y en de x-as is de waarde die de moderator aanneemt. We bekijken eerst het voorbeeld waarbij de factor variabele de moderator is. De ggplot code hebben we gebruikt in eerdere weken. Belangrijk: we gebruiken `geom_pointrange` wanneer de moderator een factor is (hier: `right_track`).\n\n```{r}\nslopes(biden_int, # <1> \n       variables = \"pid\",  \n       by = \"right_track\") |> \n  ggplot(aes(x = right_track, y = estimate)) + \n  geom_pointrange(aes(ymin = conf.low, ymax = conf.high)) + \n  labs(title = \"Marginaal effect van partij-identificatie op Biden score\", \n       y = \"Effect van partij-identificatie (pid)\", \n       x = \"Land gaat goede of verkeerde richting uit?\")  + \n  geom_text(aes(label = round(estimate, 2)), hjust = -0.2) +\n   geom_hline(yintercept = 0, linetype = 'dashed', color = 'red') +\n  scale_x_discrete(labels = c(\"Wrong Track\" = \"Verkeerde richting\", \"Right Direction\" = \"Goede richting\"))\n```\n\n1.  In dit voorbeeld nemen we de output van `slopes()` onmiddellijk op met `ggplot()` via de pipe operator. We zouden ook de resultaten van `slopes()` in een data object kunnen opslaan en die resultaten gebruiken voor een nieuwe `ggplot()` functie.\n\nEn hier is het voorbeeld waarbij de continue variabele de moderator is. We gebruiken nu `geom_line()` in combinatie met `geom_ribbon`:\n\n```{r}\n#Effect van right_track bij verschillende waarden pid\nslopes(biden_int, \n       variables = \"right_track\", \n       newdata = datagrid(pid = c(1,2,3,4,5,6,7))) |> \n  ggplot(aes(x=pid, y=estimate)) + \n  geom_line() + \n  geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.2) + \n  labs(title = \"Marginaal effect van perceptie over de richting van het land\" ,\n       y = \"Verkeerde richting (0) - Goede richting (1)\", \n       x = \"Partij-identificatie (hogere waarden: meer Republikeins)\") + \n  geom_hline(yintercept = 0, linetype = 'dashed', color = 'red') + \n  scale_x_continuous(breaks=c(1,2,3,4,5,6,7)) # <1>\n```\n\n1.  Zonder deze regel zou `ggplot()` enkel ticks tonen bij 2, 4, and 6. Dit is vaak voldoende maar hier is het handig het volledige bereik van de continue variabele te kunnen plotten (1 tot 7).\n\n## Continue X Continue Interactie\n\nDe code voor de berekening van marginale effecten bij een interactie tussen 2 continue variabelen volgt dezelfde principes. In het voorbeeld hier voorspellen we de score voor Biden op basis van de volgende onafhankelijke variabelen: `age` (leeftijd), `socialists` (evaluatie van socialisten op een schaal van 0 ('heel koud of ongunstig') tot 100 ('heel warm of gunstig'), en `rural_urban` als controlevariabele.\n\n```{r}\n#Model schatten en resultaten opslaan in object\nbiden_int2 <- lm(biden ~ socialists * age + rural_urban, data = anes)\n\n#Resultaten printen\ntidy(biden_int2)\n```\n\nHet interactie-effect is statistisch significant. We kunnen dit effect op twee manieren onderzoeken. We kunnen de marginale effecten berekenen van leeftijd op Biden score bij verschillende waarden voor socialisten. Of we berekenen de marginale effecten van socialisten op Biden score bij verschillende leeftijden. In beide gevallen moeten we waarden voor de continue moderator aanduiden in de syntax. We kiezen hier logische waarden in lijn met de schaal van de variabelen.\n\n```{r}\n#Marginaal effect van leeftijd bij socialists = 0, 10, 20...100\nslopes(biden_int2, \n       variables = \"age\", \n       newdata = datagrid(socialists = seq(from = 0, to = 100, by = 10))) \n\n#Marginaal effect van socialists bij leeftijd = 20,30,40...80\nslopes(biden_int2, \n       variables = \"socialists\", \n       newdata = datagrid(age = seq(from = 20, to = 80, by = 10))) # <1>\n```\n\n1.  Leeftijd reikt van 18 tot 80 in de dataset (respondenten ouder dan 80 krijgen gewoon de score 80).\n\nWe kunnen in de output zien dat het effect van leeftijd negatief en statistisch signficant is als de `socialists` variabele de waarde 0 aanneemt (-0.0752 \\[95% CI: -0.143, -0.008\\]). Dit is gelijk aan de coëfficiënt voor `age`. Het effect van leeftijd wordt steeds positiever als `socialists` hogere waarden aanneemt. We zien ook dat het effect van `socialists` positief is voor jonge mensen (bv., het effect voor respondenten van 20 jaar is 0.39 \\[0.34, 0.44\\]). Dit effect wordt positiever naarmate mensen ouder zijn.[^3]\n\n[^3]: Hier hebben we intervallen van 10 gebruikt voor de moderator (`age` = 20, 30, 40...). Als we telkens intervallen van 1 eenheid hadden gekozen, dan hadden we gezien dat het verschil in marginale effecten gelijk is aan de interactiecoëfficiënt. Het effect van `socialists` is 0.393 wanneer `age` = 20 en 0.403 wanneer `age` =21. 0.403 - 0.393 = 0.01 is gelijk aan de interactieterm (met afrondingen bij berekening).\n\nOm te plotten gebruiken we de code voor wanneer de moderator een continue variabele is (zie boven, @sec-ame-plotting).\n\n## Binaire x Binaire Interactie\n\nWanneer de interactievariabele een vermenigvuldiging is van 2 binaire factor variabelen zijn wederom dezelfde principes van toepassing. Hier voorspellen we de score voor Biden met een interactie tussen `right_track` en `vote2016` (met `rural_urban` als controlevariabele).\n\n```{r}\n#Model schatten en resultaten opslaan\nbiden_int3 <- lm(biden ~ right_track * vote2016 + rural_urban, data = anes)\n\n#Overzicht resultaten\nsummary(biden_int3)\n```\n\nDe marginale effecten worden als volgt berekend:\n\n```{r}\n#right_track als moderator\nslopes(biden_int3, \n       variables = \"vote2016\", \n       by = \"right_track\")\n\n#vote2016 als moderator\nslopes(biden_int3, \n       variables = \"right_track\", \n       by = \"vote2016\")\n```\n\nDe eerste resultaten tonen dat 2016 Trump kiezers een slechtere indruk van Biden hebben dan 2016 Clinton kiezers, ongeacht wat ze vinden van het land. Maar het verschil is groter voor respondenten die vinden dat het land de verkeerde richting opgaat (verschil = -51.6) dan zij die vinden dat het de goede kant uitgaat (-37.80). Dit verschil is gelijk aan de interactiecoëfficiënt. Deze coëfficiënt was ook statistisch significant.\n\nOm dit te plotten gebruiken we de code voor wanneer de moderator een factor variabele is (zie boven @sec-ame-plotting).\n\n## Logistische regressie: voorbeeld\n\nBij logistische regressie worden de marginale effecten met dezelfde code berekend. Hier geven deze effecten de gemiddelde verandering in voorspelde kans weer in percentpunten (zie @sec-marginal-effects).\n\nWe hebben reeds een `righttrack_int` model berekend, waarin we een interactie tussen `age` en `vote2016` hebben toegevoegd. We bekijken de resultaten nogmaals:\n\n\n```{r}\n#Het model\ntidy(righttrack_int)\n\n```\n\nDe interactie is tussen `age` (continue variabele) en `vote2016` (binaire factor variabelen). We berekenen de marginale effecten als volgt:\n\n```{r}\n# age als moderator op = 20, 30...80\nslopes(righttrack_int, \n       variables = \"vote2016\", \n       newdata = datagrid(age = seq(from = 20, to = 80, by = 10))) \n\n# vote2016 als moderator\nslopes(righttrack_int, \n       variables = \"age\", \n       by = \"vote2016\")\n```\n\nWe verwachten dat mensen die op Trump gestemd hebben in 2016 een grotere kans hebben om te zeggen dat het land de goede richting uitgaat dan mensen die Clinton stemden. Dit effect geldt al voor jonge mensen maar wordt sterker met leeftijd. Voor respondenten die 30 jaar oud zijn is de kans om te zeggen dat het land de goede richting uitgaat 45.5 percentpunten hoger voor Trump kiezers. Voor respondenten van 80 jaar is dit 51.2 percentpunten.[^4]\n\n[^4]: Hier berekenen we effecten voor respondenten die 20 jaar oud zijn. Deze respondenten konden echter nog niet stemmen in 2016. Het effect dat we hier vinden voor deze respondenten is niet betekenisvol. We moeten hiervoor blijven oppassen als we interpretaties maken.\n\nZie eerder secties voor instructies over plotten.\n","srcMarkdownNoYaml":"\n\n# Marginale Effecten in Interactiemodellen {#sec-inter-marginal}\n\n```{r}\n#| label: setup\n#| echo: false\n#| message: false\n#| warning: false\n\n#Packages\n\nlibrary(broom)        #Modelresultaten\nlibrary(rio)          #laden van data\nlibrary(tidyverse)    #datamanipulatie en grafieken\nlibrary(marginaleffects) #marginale effecten en voorspelde waarden berekenen\n\n\n#Data\nanes <- import(\"data/anes_interactions.rda\")\n\n#Modellen\nbiden_int <- lm(biden ~ pid * right_track + rural_urban, data = anes)\nrighttrack_int <- glm(right_track ~ vote2016 * age + rural_urban, \n                      family = \"binomial\", data = anes)\n```\n\n```{r}\n#| eval: false\n\n#Packages\nlibrary(broom)        #Modelresultaten\nlibrary(rio)          #laden van data\nlibrary(tidyverse)    #datamanipulatie en grafieken\nlibrary(marginaleffects) #marginale effecten en voorspelde waarden berekenen\n\n#Data\nanes <- import(\"data/anes_interactions.rda\")\n\n#Modellen\nbiden_int <- lm(biden ~ pid * right_track + rural_urban, data = anes)\nrighttrack_int <- glm(right_track ~ vote2016 * age + rural_urban, \n                      family = \"binomial\", data = anes)\n\n```\n\nIn het vorige hoofdstuk bespraken we hoe een interactieterm toe te voegen aan een regressiemodel. Zo kunnen we nagaan of het effect van een onafhankelijke variabele verschilt naargelang een andere onafhankelijke variabele andere waarden aanneemt:\n\n![](figures/Interaction.png){fig-align=\"center\"}\n\nIn dit model bekijken we bijvoorbeeld of iemands evaluatie van Joe Biden afhangt van partij-identificatie, oordeel of het land in de juiste of verkeerde richting gaat, en de interactie tussen deze 2 predictors.\n\n```{r}\ntidy(biden_int, conf.int = TRUE) \n```\n\nWat betekenen deze coëfficiënten nu? Het toevoegen van een interactieterm leidt tot andere interpretaties dan degene die we hiervoor hebben gezien in modellen zonder interacties.\n\n::: callout-warning\n#### Interpretatie\n\nDe coëfficiënten van de variabelen die de interactie opmaken interpreteren we niet op dezelfde manier als coëfficiënten die geen deel uitmaken van een interactie.\n\nStel bijvoorbeeld dat we het volgende model hebben: Y = Constante + Variabele 1 + Variabele 2 + (Variabele 1 \\* Variabele 2).\n\n-   Coëfficiënt voor Variabele 1 (bv., `pid`): het verband tussen de Variabele 1 en Y als Variabele 2 (bv., `right_track`) **gelijk is aan 0**.\n-   Coëfficiënt voor Variable 2 (bv., `right_track`): het verband tussen de Variabele 2 en Y als Variabele 1 (bv., `pid`) **gelijk is aan 0**.[^1]\n-   Coëfficiënt voor de interactievariabele (bv., `right_trackRight Direction`): Hoe verandert de regressiecoëfficiënt voor een van de variabelen in de interactie als de andere variabele met 1 eenheid stijgt?\n    -   1\\) Hoe verandert het verband tussen `pid` en `biden` als `right_track` met 1 eenheid stijgt? OF\n    -   2\\) Hoe verandert het verband tussen `right_track` en `biden` als `pid` met 1 eenheid stijgt?\n:::\n\n[^1]: Onze `pid` variabele heeft een bereik van 1 tot 7 en kent dus geen nulwaarde. Het effect wordt geëxtrapoleerd alsof er een nulwaarde zou zijn. Dit vormt niet echt een probleem.\n\nInteractietermen kunnen moeilijk zijn om te interpreteren op basis van de standaard output van een regressieanalyse. Het berekenen en plotten van *marginale effecten* kan de interpretatie vergemakkelijken voor jezelf en je lezers: Wat is de verwachte verandering in Y als X met 1 eenheid stijgt? Deze verandering drukken we uit in eenheden voor een continue Y (OLS) en in percenpunten kans voor een binaire Y. Bij een interactie-effect berekenen (en plotten) we de verwachte verandering in Y als X met 1 eenheid stijgt voor verschillende waarden van een andere predictor Z. We gebruiken de `slopes()` functie uit het `marginaleffects` package.\n\nWe geven hieronder voorbeelden voor verschillende types onafhankelijke variabelen (bv. binair *\\** continu, continu \\* continu etc).[^2]\n\n[^2]: We tonen geen voorbeeld voor een interactie met een categorische variabele met 3 of meer categorieën maar dezelfde principes als binaire variabelen worden gevolgd hiervoor.\n\n## Binaire X Continue Interactie\n\n### Berekening en interpretatie\n\nWe bekijken eerst hoe we de marginale effecten berekenen voor een interactie tussen een binaire en continue variabele. Dit was het geval voor ons 'biden_int' model waarin een interactie werd toegevoegd tussen partij-identificatie (pid, loopt van 1 'Overtuigd Democraat' tot 7 'Overtuigd Republikein') en right_track (waarbij '0' betekent dat een respondent vindt dat het de verkeerde richting uitgaat met het land en '1' dat het de goede richting uitgaat met het land).\n\nHier gebruiken we de `slopes()` functie om het effect van pid op Biden scores te berekenen voor elke waarde van right_track. Wanneer de moderator (Z) een factor variabele is, zoals hier het geval is, gebruiken we de volgende code:\n\n```{r}\nslopes(biden_int, \n       variables = \"pid\", \n       by = \"right_track\")\n```\n\n`slopes(biden_int,`\n\n:   We passen de functie `slopes` toe op het model tussen haakjes.\n\n`variables = \"pid\"`\n\n:   We duiden hier de onafhankelijke variabele aan waarvoor we de verschillende marginale effecten willen berekenen. Voor eigen toepassingen voeg je hier je eigen continue variabele toe.\n\n`by = \"right_track\"`\n\n:   Hier wordt de moderator variabele aangeduid. De code kan enkel gebruikt worden als de moderator een factor is.\n\nDe helling van de regressielijn voor `pid` als `right_track` = 'Right Direction'\" is -7.11. De helling van pid wanneer `right_track` = 'Wrong Track' is -10.82. Het effect van partij-identificatie op de score voor Biden is sterker (negatiever) als respondenten vinden dat het de verkeerde richting uitgaat met het land. Dit effect is ook statistisch significant (p \\< 0.001). Dit zien we aan de p-waarde voor de interactie-term (zie onder). We kunnen de nulhypothese verwerpen dat het effect van `pid` niet verschilt naargelang `right_track` andere waarden aanneemt.\n\nJe ziet ook dat het effect van `pid` als `right_track` = 'Wrong Track' gelijk is aan de coëfficiënt van `pid` in het model (dit effect geldt als moderator 0 is). Het verschil tussen de 2 marginale effecten is gelijk aan de waarde van de interactiecoëfficiënt.\n\n```{r}\n#resultaten om coëfficiënten en significantie te tonen\ntidy(biden_int) |> select(term, estimate, p.value)\n\n#Marginaal effect (Right Direction) - Marginaal effect (Wrong Track) = coëfficiënt van de interactieterm\n-7.11 - (-10.82)\n```\n\nWe kunnen ook onderzoeken hoe het effect van de factor variabele `right_track` op de afhankelijke variabele anders is voor verschillende waarden van partij-identificatie. We kiezen er hier voor de effecten te berekenen voor elke waarde van pid gezien er maar 7 waarden zijn.\n\n```{r}\nslopes(biden_int, \n       variables = \"right_track\", \n       newdata = datagrid(pid = c(1,2,3,4,5,6,7)))\n```\n\n`newdata = datagrid(pid = c(1,2,3,4,5,6,7)))`\n\n:   We geven hier de waarden op van de moderator waarvoor marginale effecten van de andere predictor berekend moeten worden. De waarden dien je te veranderen voor eigen toepassingen. We gebruiken \"newdata = datagrid()\" omdat pid hier als continue variabele wordt gebruikt.\n\nDe output hierboven toont dat het effect van `right_ direction'_track`ongeveer -29.47 punten is voor overtuigde Democraten (pid=1), -25.76 punten voor minder overtuigde Democraten (pid = 2), en -7.19 punten voor overtuigde Republikeinen (pid=7). Het effect van de `right_track` variabele daalt met 3.71 eenheden telkens als `pid`met 1 eenheid stijgt: dit is de waarde van de interactiecoëfficiënt.\n\n```{r}\n##resultaten om coëfficiënten en significantie te tonen\ntidy(biden_int) |> select(term, estimate, p.value)\n\n#Marginaal effect (PID = 2) - Marginaal effect (PID = 1) = coëfficiënt van de interactieterm\n-25.76 - (-29.47)\n\n#Marginaal effect (PID = 7) - Marginaal effect (PID = 6) = coëfficiënt van de interactieterm\n-7.19 - (-10.90)\n```\n\nDe statistisch significante interactieterm leidt ertoe dat we de nulhypothese verwerpen dat het effect van `right_track` gelijk blijft als `pid` verandert.\n\n### Plotten {#sec-ame-plotting}\n\nMarginale effecten worden vaak gevisualiseerd in een grafiek. De y-as in deze grafieken is het geschatte marginale effect van X op Y en de x-as is de waarde die de moderator aanneemt. We bekijken eerst het voorbeeld waarbij de factor variabele de moderator is. De ggplot code hebben we gebruikt in eerdere weken. Belangrijk: we gebruiken `geom_pointrange` wanneer de moderator een factor is (hier: `right_track`).\n\n```{r}\nslopes(biden_int, # <1> \n       variables = \"pid\",  \n       by = \"right_track\") |> \n  ggplot(aes(x = right_track, y = estimate)) + \n  geom_pointrange(aes(ymin = conf.low, ymax = conf.high)) + \n  labs(title = \"Marginaal effect van partij-identificatie op Biden score\", \n       y = \"Effect van partij-identificatie (pid)\", \n       x = \"Land gaat goede of verkeerde richting uit?\")  + \n  geom_text(aes(label = round(estimate, 2)), hjust = -0.2) +\n   geom_hline(yintercept = 0, linetype = 'dashed', color = 'red') +\n  scale_x_discrete(labels = c(\"Wrong Track\" = \"Verkeerde richting\", \"Right Direction\" = \"Goede richting\"))\n```\n\n1.  In dit voorbeeld nemen we de output van `slopes()` onmiddellijk op met `ggplot()` via de pipe operator. We zouden ook de resultaten van `slopes()` in een data object kunnen opslaan en die resultaten gebruiken voor een nieuwe `ggplot()` functie.\n\nEn hier is het voorbeeld waarbij de continue variabele de moderator is. We gebruiken nu `geom_line()` in combinatie met `geom_ribbon`:\n\n```{r}\n#Effect van right_track bij verschillende waarden pid\nslopes(biden_int, \n       variables = \"right_track\", \n       newdata = datagrid(pid = c(1,2,3,4,5,6,7))) |> \n  ggplot(aes(x=pid, y=estimate)) + \n  geom_line() + \n  geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.2) + \n  labs(title = \"Marginaal effect van perceptie over de richting van het land\" ,\n       y = \"Verkeerde richting (0) - Goede richting (1)\", \n       x = \"Partij-identificatie (hogere waarden: meer Republikeins)\") + \n  geom_hline(yintercept = 0, linetype = 'dashed', color = 'red') + \n  scale_x_continuous(breaks=c(1,2,3,4,5,6,7)) # <1>\n```\n\n1.  Zonder deze regel zou `ggplot()` enkel ticks tonen bij 2, 4, and 6. Dit is vaak voldoende maar hier is het handig het volledige bereik van de continue variabele te kunnen plotten (1 tot 7).\n\n## Continue X Continue Interactie\n\nDe code voor de berekening van marginale effecten bij een interactie tussen 2 continue variabelen volgt dezelfde principes. In het voorbeeld hier voorspellen we de score voor Biden op basis van de volgende onafhankelijke variabelen: `age` (leeftijd), `socialists` (evaluatie van socialisten op een schaal van 0 ('heel koud of ongunstig') tot 100 ('heel warm of gunstig'), en `rural_urban` als controlevariabele.\n\n```{r}\n#Model schatten en resultaten opslaan in object\nbiden_int2 <- lm(biden ~ socialists * age + rural_urban, data = anes)\n\n#Resultaten printen\ntidy(biden_int2)\n```\n\nHet interactie-effect is statistisch significant. We kunnen dit effect op twee manieren onderzoeken. We kunnen de marginale effecten berekenen van leeftijd op Biden score bij verschillende waarden voor socialisten. Of we berekenen de marginale effecten van socialisten op Biden score bij verschillende leeftijden. In beide gevallen moeten we waarden voor de continue moderator aanduiden in de syntax. We kiezen hier logische waarden in lijn met de schaal van de variabelen.\n\n```{r}\n#Marginaal effect van leeftijd bij socialists = 0, 10, 20...100\nslopes(biden_int2, \n       variables = \"age\", \n       newdata = datagrid(socialists = seq(from = 0, to = 100, by = 10))) \n\n#Marginaal effect van socialists bij leeftijd = 20,30,40...80\nslopes(biden_int2, \n       variables = \"socialists\", \n       newdata = datagrid(age = seq(from = 20, to = 80, by = 10))) # <1>\n```\n\n1.  Leeftijd reikt van 18 tot 80 in de dataset (respondenten ouder dan 80 krijgen gewoon de score 80).\n\nWe kunnen in de output zien dat het effect van leeftijd negatief en statistisch signficant is als de `socialists` variabele de waarde 0 aanneemt (-0.0752 \\[95% CI: -0.143, -0.008\\]). Dit is gelijk aan de coëfficiënt voor `age`. Het effect van leeftijd wordt steeds positiever als `socialists` hogere waarden aanneemt. We zien ook dat het effect van `socialists` positief is voor jonge mensen (bv., het effect voor respondenten van 20 jaar is 0.39 \\[0.34, 0.44\\]). Dit effect wordt positiever naarmate mensen ouder zijn.[^3]\n\n[^3]: Hier hebben we intervallen van 10 gebruikt voor de moderator (`age` = 20, 30, 40...). Als we telkens intervallen van 1 eenheid hadden gekozen, dan hadden we gezien dat het verschil in marginale effecten gelijk is aan de interactiecoëfficiënt. Het effect van `socialists` is 0.393 wanneer `age` = 20 en 0.403 wanneer `age` =21. 0.403 - 0.393 = 0.01 is gelijk aan de interactieterm (met afrondingen bij berekening).\n\nOm te plotten gebruiken we de code voor wanneer de moderator een continue variabele is (zie boven, @sec-ame-plotting).\n\n## Binaire x Binaire Interactie\n\nWanneer de interactievariabele een vermenigvuldiging is van 2 binaire factor variabelen zijn wederom dezelfde principes van toepassing. Hier voorspellen we de score voor Biden met een interactie tussen `right_track` en `vote2016` (met `rural_urban` als controlevariabele).\n\n```{r}\n#Model schatten en resultaten opslaan\nbiden_int3 <- lm(biden ~ right_track * vote2016 + rural_urban, data = anes)\n\n#Overzicht resultaten\nsummary(biden_int3)\n```\n\nDe marginale effecten worden als volgt berekend:\n\n```{r}\n#right_track als moderator\nslopes(biden_int3, \n       variables = \"vote2016\", \n       by = \"right_track\")\n\n#vote2016 als moderator\nslopes(biden_int3, \n       variables = \"right_track\", \n       by = \"vote2016\")\n```\n\nDe eerste resultaten tonen dat 2016 Trump kiezers een slechtere indruk van Biden hebben dan 2016 Clinton kiezers, ongeacht wat ze vinden van het land. Maar het verschil is groter voor respondenten die vinden dat het land de verkeerde richting opgaat (verschil = -51.6) dan zij die vinden dat het de goede kant uitgaat (-37.80). Dit verschil is gelijk aan de interactiecoëfficiënt. Deze coëfficiënt was ook statistisch significant.\n\nOm dit te plotten gebruiken we de code voor wanneer de moderator een factor variabele is (zie boven @sec-ame-plotting).\n\n## Logistische regressie: voorbeeld\n\nBij logistische regressie worden de marginale effecten met dezelfde code berekend. Hier geven deze effecten de gemiddelde verandering in voorspelde kans weer in percentpunten (zie @sec-marginal-effects).\n\nWe hebben reeds een `righttrack_int` model berekend, waarin we een interactie tussen `age` en `vote2016` hebben toegevoegd. We bekijken de resultaten nogmaals:\n\n\n```{r}\n#Het model\ntidy(righttrack_int)\n\n```\n\nDe interactie is tussen `age` (continue variabele) en `vote2016` (binaire factor variabelen). We berekenen de marginale effecten als volgt:\n\n```{r}\n# age als moderator op = 20, 30...80\nslopes(righttrack_int, \n       variables = \"vote2016\", \n       newdata = datagrid(age = seq(from = 20, to = 80, by = 10))) \n\n# vote2016 als moderator\nslopes(righttrack_int, \n       variables = \"age\", \n       by = \"vote2016\")\n```\n\nWe verwachten dat mensen die op Trump gestemd hebben in 2016 een grotere kans hebben om te zeggen dat het land de goede richting uitgaat dan mensen die Clinton stemden. Dit effect geldt al voor jonge mensen maar wordt sterker met leeftijd. Voor respondenten die 30 jaar oud zijn is de kans om te zeggen dat het land de goede richting uitgaat 45.5 percentpunten hoger voor Trump kiezers. Voor respondenten van 80 jaar is dit 51.2 percentpunten.[^4]\n\n[^4]: Hier berekenen we effecten voor respondenten die 20 jaar oud zijn. Deze respondenten konden echter nog niet stemmen in 2016. Het effect dat we hier vinden voor deze respondenten is niet betekenisvol. We moeten hiervoor blijven oppassen als we interpretaties maken.\n\nZie eerder secties voor instructies over plotten.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"interaction_02.html"},"language":{"toc-title-document":"Inhoudsopgave","toc-title-website":"Op deze pagina","related-formats-title":"Andere formaten","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Bron","other-links-title":"Andere Links","code-links-title":"Code Links","launch-dev-container-title":"Dev Container starten","launch-binder-title":"Binder starten","article-notebook-label":"Artikel Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Broncode downloaden","notebook-preview-back":"Terug naar Artikel","manuscript-meca-bundle":"MECA Archief","section-title-abstract":"Samenvatting","section-title-appendices":"Bijlagen","section-title-footnotes":"Voetnoten","section-title-references":"Referenties","section-title-reuse":"Hergebruik","section-title-copyright":"Auteursrechten","section-title-citation":"Citaat","appendix-attribution-cite-as":"Citeer dit werk als:","appendix-attribution-bibtex":"BibTeX citaat:","appendix-view-license":"Licentie Bekijken","title-block-author-single":"Auteur","title-block-author-plural":"Auteurs","title-block-affiliation-single":"Affiliatie","title-block-affiliation-plural":"Affiliaties","title-block-published":"Publicatiedatum","title-block-modified":"Gewijzigd","title-block-keywords":"Trefwoorden","callout-tip-title":"Tip","callout-note-title":"Opmerking","callout-warning-title":"Waarschuwing","callout-important-title":"Belangrijk","callout-caution-title":"Opgelet","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Alle code tonen","code-tools-hide-all-code":"Alle code verbergen","code-tools-view-source":"Broncode bekijken","code-tools-source-code":"Broncode","tools-share":"Share","tools-download":"Download","code-line":"Regel","code-lines":"Regels","copy-button-tooltip":"Kopieer naar klembord","copy-button-tooltip-success":"Gekopieerd!","repo-action-links-edit":"Pagina bewerken","repo-action-links-source":"Broncode bekijken","repo-action-links-issue":"Een probleem melden","back-to-top":"Terug naar boven","search-no-results-text":"Geen resultaten","search-matching-documents-text":"Gevonden documenten","search-copy-link-title":"Kopieer link om te zoeken","search-hide-matches-text":"Extra overeenkomsten verbergen","search-more-match-text":"meer overeenkomst in dit document","search-more-matches-text":"meer overeenkomsten in dit document","search-clear-button-title":"Wissen","search-text-placeholder":"","search-detached-cancel-button-title":"Annuleren","search-submit-button-title":"Verzenden","search-label":"Zoeken","toggle-section":"Schakel sectie","toggle-sidebar":"Schakel zijbalknavigatie","toggle-dark-mode":"Schakel donkere modus","toggle-reader-mode":"Schakel leesmodus","toggle-navigation":"Schakel navigatie","crossref-fig-title":"Figuur","crossref-tbl-title":"Tabel","crossref-lst-title":"Listing","crossref-thm-title":"Stelling","crossref-lem-title":"Lemma","crossref-cor-title":"Conclusie","crossref-prp-title":"Voorstel","crossref-cnj-title":"Aanname","crossref-def-title":"Definitie","crossref-exm-title":"Voorbeeld","crossref-exr-title":"Oefening","crossref-ch-prefix":"Hoofdstuk","crossref-apx-prefix":"Bijlage","crossref-sec-prefix":"Paragraaf","crossref-eq-prefix":"Vergelijking","crossref-lof-title":"Lijst van figuren","crossref-lot-title":"Lijst van tabellen","crossref-lol-title":"Lijst van listings","environment-proof-title":"Bewijs","environment-remark-title":"Opmerking","environment-solution-title":"Oplossing","listing-page-order-by":"Sorteer op","listing-page-order-by-default":"Standaard","listing-page-order-by-date-asc":"Oudste","listing-page-order-by-date-desc":"Nieuwste","listing-page-order-by-number-desc":"Aflopend","listing-page-order-by-number-asc":"Oplopend","listing-page-field-date":"Datum","listing-page-field-title":"Titel","listing-page-field-description":"Beschrijving","listing-page-field-author":"Auteur","listing-page-field-filename":"Bestandsnaam","listing-page-field-filemodified":"Gewijzigd","listing-page-field-subtitle":"Subtitel","listing-page-field-readingtime":"Leestijd","listing-page-field-wordcount":"Woordentelling","listing-page-field-categories":"Categorieën","listing-page-minutes-compact":"{0} min","listing-page-category-all":"Alle","listing-page-no-matches":"Geen overeenkomsten","listing-page-words":"{0} woorden","listing-page-filter":"Filter","draft":"Ontwerp"},"metadata":{"lang":"nl","fig-responsive":true,"quarto-version":"1.5.57","bibliography":["references.bib"],"editor":"visual","theme":{"light":"cosmo","dark":"darkly"},"code-annotations":"hover"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}