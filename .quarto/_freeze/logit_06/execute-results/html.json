{
  "hash": "35fa4e5a0a57a1b7debdc39854f2e394",
  "result": {
    "engine": "knitr",
    "markdown": "---\ncode-annotations: hover\n---\n\n\n\n# Rapporteren en Presenteren van Resultaten {#sec-reporting-logit}\n\n\n\n::: {.cell}\n\n:::\n\n\n\nLogistische regressiemodellen moeten we net zoals lineaire modellen ook kunnen presenteren en uitleggen aan anderen. In dit hoofdstuk bespreken we de gangbare manieren om dit te doen.\n\nWe gebruiken deze packages en data:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Packages\nlibrary(rio)             #laden van data\nlibrary(tidyverse)       #datamanipulatie en grafieken\nlibrary(broom)           #data voor residuals en influential cases\nlibrary(modelsummary)    #regressietabellen maken\nlibrary(marginaleffects) #voorspelde waarden berekenen\n\n#Data\nESS9NL <- import(\"ESS9e03, Netherlands.sav\")\n```\n:::\n\n\n\nWe gebruiken onderstaand model in deze voorbeelden. Zie ook de vorige hoofdstukken voor verdere uitleg over dit model:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Data management\nESS9NL <- ESS9NL |>\n  #Factor maken van categorische variabelen\n  mutate(gndr_F = factorize(gndr), \n         vote_F = factorize(vote))  |> \n  #Not Eligible op missing zetten\n  mutate(vote_F = na_if(vote_F,\"Not eligible to vote\")) |> \n  #Relevel van variabelen\n  mutate(vote_F = relevel(vote_F, \"No\"), \n         gndr_F = relevel(gndr_F, \"Female\")) |> \n  #Droppen van extra level in gndr\n  mutate(gndr_F = droplevels(gndr_F)) # <1>\n\n#model schatten\nVote_model_mp <- glm(vote_F ~ gndr_F + agea + trstplt + lrscale, \n                data = ESS9NL, family = \"binomial\")\n\n#output bekijken\nsummary(Vote_model_mp)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = vote_F ~ gndr_F + agea + trstplt + lrscale, family = \"binomial\", \n    data = ESS9NL)\n\nCoefficients:\n             Estimate Std. Error z value Pr(>|z|)    \n(Intercept) -0.284194   0.380455  -0.747    0.455    \ngndr_FMale   0.043281   0.154201   0.281    0.779    \nagea         0.018349   0.004503   4.075 4.61e-05 ***\ntrstplt      0.195020   0.038706   5.039 4.69e-07 ***\nlrscale      0.029257   0.039306   0.744    0.457    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 1173.9  on 1424  degrees of freedom\nResidual deviance: 1135.3  on 1420  degrees of freedom\n  (248 observations deleted due to missingness)\nAIC: 1145.3\n\nNumber of Fisher Scoring iterations: 4\n```\n\n\n:::\n:::\n\n\n\n1.  Deze data management stap zorgt ervoor dat we straks de gemiddelde marginale effecten (AME) kunnen berekenen zonder error zie @sec-marginal-effects. Dit is niet nodig als je `factor()` gebruikt in plaats van `factorize()`.\n\n## Rapportage\n\nEen rapport van een logistisch regressiemodel bevat best de volgende zaken:\n\n-   Een bespreking van de richting van de relatie en wat dit concreet betekent (de codering van de variabelen inachtgenomen).\n    -   Bij een multiple regressie is het belangrijk te verduidelijken dat het effect dat je vindt voor een onafhankelijke variabele gecontroleerd is op de andere onafhankelijke variabelen in het model. Deze worden 'constant gehouden' (oftewel 'ceteris paribus').\n-   Een bespreking van de AMEs of voorspelde waarden om de sterkte van de associatie te duiden.\n-   Een bespreking van de statistische significantie (verwerpen of niet nulhypothese?) met vermelding van z-statistiek en p-waarde en/of het betrouwbaarheidsinterval.\n    -   Coëfficiënten met p-waarden groter dan 0.05 worden meestal niet als statistisch significant of als statistisch significant bij conventionele niveaus beschouwd.[^logit_06-1] Rapporteer op basis van het hoogste signficantieniveau dat de p-waarde aangeeft:\n        -   Als p = 0.04, dan p \\< 0.05 (significant op 95% niveau)\n        -   Als p = 0.02, dan p \\< 0.01 (significant op 99% niveau)\n        -   Als p = 0.0000005, dan p \\< 0.001 (significant op 99.9% niveau)\n        -   We rapporteren meestal niet hoger dan 99.9% of p \\< 0.001 (bv., we zeggen niet p \\< 0.000001, maar p \\< 0.001). We schrijven ook nooit p \\< 0.000.\n    -   Het betrouwbaarheidsinterval kan ook gebruikt worden om statistische significantie te bespreken en de onzekerheid rond de geschatte AMEs/voorspellingen aan te duiden. Als je het betrouwbaarheidsinterval bespreekt, kun je dit tussen haakjes toevoegen, bv. \"het gemiddelde marginale effect van leeftijd is 0.004 (95% CI: -0.006, 0.013)\".\n    -   Het is minder gebruikelijk de z-statistiek concreet te benoemen, maar het is ook geen probleem als je dit doet. Indien de z-waarde wordt opgenomen, zet je deze bij de p-waarde: \"(z = 1.18, p \\> 0.05)\".\n\n[^logit_06-1]: Als de N van het model laag is, kan eventueel een 90% niveau gebruikt worden.\n\nHieronder vind je een voorbeeld voor `gndr_F` (binaire factor) en `trstplt` (continue predictor) op basis van het hierboven geschatte model. Zie vorige hoofdstukken voor de berekening van de AME en odds ratio waarden voor deze variabelen.\n\n::: callout-tip\n#### Rapportagevoorbeeld\n\n**trstplt (AME)**: De kans dat iemand gaat stemmen is hoger als vertrouwen in politici hoger is. De kans neemt gemiddeld genomen met 2.3 percentpunten toe als vertouwen met 1 eenheid stijgt. De relatie is statistisch significant (p \\< 0.001).\n\n**gndr (AME)**: De kans om te stemmen is gemiddeld 0.5 percentpunten hoger voor mannen dan voor vrouwen. Deze relatie is echter niet statistisch significant (p = 0.78).\n\n**gndr (Odds Ratio)**: De odds om te stemmen voor mannen zijn 1.04 keer hoger dan die voor vrouwen. Het verschil is echter niet statistisch significant (p = 0.78).\n:::\n\nBijkomende richtlijnen voor besprekingen in papers:\n\n-   In je rapportage kun je ook een bespreking van de voorspelde waarden opnemen (bv. wat is de voorspelde kans dat iemand gaat stemmen bij lage en hoge niveaus van vetrouwen in politici?) Een plot van voorspelde waarden kan de bespreking verder verduidelijken. Zie @sec-presentation-predicted-probability-plots voor meer informatie.\n-   Als je onderzoek vooral gericht is op de relatie tussen een specifieke onafhankelijke variabele en de afhankelijke variabele dan is een discussie over de controlevariabelen doorgaans niet nodig.\n-   Het intercept wordt zelden besproken bij logistische regressies. Hte intercept is de odds op Y als alle predictoren gelijk zijn aan nul.\n-   Wees voorzichting in je bespreking van de relatie tussen de variabelen. Causaliteit is moeilijk te bepalen en is onderhevig aan sterke voorwaarden. Je schrijft bijgevolg dus meestal niet het \"effect van X op Y\" , maar \"de verandering in X is geassocieerd met de verandering in Y\".\n\n## Presentatie: Regressietabellen {#sec-presentation-regression-tables-logit}\n\nWe gebruiken de `modelsummary()` functie uit het `modelsummary` package om regressietabellen te produceren. De procedure en syntax is gelijkaardig aan die voor lineaire regressietabellen (zie @sec-presenting-linear-regression-regression-tables). Het belangrijkste verschil zit in de model fit statistieken.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelsummary(Vote_model_mp,\n             stars = TRUE,\n             coef_rename = c(\"(Intercept)\" = \"Constante\",\n                             \"agea\" = \"Leeftijd\",\n                             \"gndr_FMale\" = \"Man\",\n                             \"trstplt\"= \"Vertrouwen in politici\",\n                             \"lrscale\" = \"links-recht positie\"),\n             gof_map = c(\"nobs\", \"logLik\"),\n             title = \"Opkomst in Nederland (ESS9)\",\n             notes = (\"Logistische regressiecoëfficiënten met standaardfouten tussen haakjes\"))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n\n      function styleCell_y1lo6e4nll9k5j02u1p2(i, j, css_id) {\n          var table = document.getElementById(\"tinytable_y1lo6e4nll9k5j02u1p2\");\n          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors\n          if (cell) {\n              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);\n              cell.classList.add(css_id);\n          } else {\n              console.warn(`Cell at (${i}, ${j}) not found.`);\n          }\n      }\n      function insertSpanRow(i, colspan, content) {\n        var table = document.getElementById('tinytable_y1lo6e4nll9k5j02u1p2');\n        var newRow = table.insertRow(i);\n        var newCell = newRow.insertCell(0);\n        newCell.setAttribute(\"colspan\", colspan);\n        // newCell.innerText = content;\n        // this may be unsafe, but innerText does not interpret <br>\n        newCell.innerHTML = content;\n      }\n      function spanCell_y1lo6e4nll9k5j02u1p2(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_y1lo6e4nll9k5j02u1p2\");\n        const targetRow = table.rows[i];\n        const targetCell = targetRow.cells[j];\n        for (let r = 0; r < rowspan; r++) {\n          // Only start deleting cells to the right for the first row (r == 0)\n          if (r === 0) {\n            // Delete cells to the right of the target cell in the first row\n            for (let c = colspan - 1; c > 0; c--) {\n              if (table.rows[i + r].cells[j + c]) {\n                table.rows[i + r].deleteCell(j + c);\n              }\n            }\n          }\n          // For rows below the first, delete starting from the target column\n          if (r > 0) {\n            for (let c = colspan - 1; c >= 0; c--) {\n              if (table.rows[i + r] && table.rows[i + r].cells[j]) {\n                table.rows[i + r].deleteCell(j);\n              }\n            }\n          }\n        }\n        // Set rowspan and colspan of the target cell\n        targetCell.rowSpan = rowspan;\n        targetCell.colSpan = colspan;\n      }\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 11, j: 0 },  ], css_id: 'tinytable_css_wgwa1vi2668nzjv6jley',}, \n          { positions: [ { i: 12, j: 0 },  ], css_id: 'tinytable_css_hpc6gein1kzl94rjr3se',}, \n          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_bwaujqjuhbjytyrqrbev',}, \n          { positions: [ { i: 10, j: 0 },  ], css_id: 'tinytable_css_beqqwfs6lwtcc1p4lhyd',}, \n          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 11, j: 1 },  ], css_id: 'tinytable_css_6eu40kp8fcy7dnil8yt8',}, \n          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_59iy94coq9gfw6u91ipn',}, \n          { positions: [ { i: 12, j: 1 },  ], css_id: 'tinytable_css_0s4a40x0pydp6x8ub5te',}, \n          { positions: [ { i: 10, j: 1 },  ], css_id: 'tinytable_css_0ajwtn1hwt47s9k3qmmk',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  styleCell_y1lo6e4nll9k5j02u1p2(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <style>\n      /* tinytable css entries after */\n      .table td.tinytable_css_wgwa1vi2668nzjv6jley, .table th.tinytable_css_wgwa1vi2668nzjv6jley { text-align: left; }\n      .table td.tinytable_css_hpc6gein1kzl94rjr3se, .table th.tinytable_css_hpc6gein1kzl94rjr3se { text-align: left; border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_bwaujqjuhbjytyrqrbev, .table th.tinytable_css_bwaujqjuhbjytyrqrbev { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n      .table td.tinytable_css_beqqwfs6lwtcc1p4lhyd, .table th.tinytable_css_beqqwfs6lwtcc1p4lhyd { text-align: left; border-bottom: solid black 0.05em; }\n      .table td.tinytable_css_6eu40kp8fcy7dnil8yt8, .table th.tinytable_css_6eu40kp8fcy7dnil8yt8 { text-align: center; }\n      .table td.tinytable_css_59iy94coq9gfw6u91ipn, .table th.tinytable_css_59iy94coq9gfw6u91ipn { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n      .table td.tinytable_css_0s4a40x0pydp6x8ub5te, .table th.tinytable_css_0s4a40x0pydp6x8ub5te { text-align: center; border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_0ajwtn1hwt47s9k3qmmk, .table th.tinytable_css_0ajwtn1hwt47s9k3qmmk { text-align: center; border-bottom: solid black 0.05em; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_y1lo6e4nll9k5j02u1p2\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        <caption>Opkomst in Nederland (ESS9)</caption>\n              <tr>\n                <th scope=\"col\"> </th>\n                <th scope=\"col\">(1)</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='2'>+ p < 0.1, * p < 0.05, ** p < 0.01, *** p < 0.001</td></tr>\n<tr><td colspan='2'>Logistische regressiecoëfficiënten met standaardfouten tussen haakjes</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td>Constante</td>\n                  <td>-0.284</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>(0.380)</td>\n                </tr>\n                <tr>\n                  <td>Man</td>\n                  <td>0.043</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>(0.154)</td>\n                </tr>\n                <tr>\n                  <td>Leeftijd</td>\n                  <td>0.018***</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>(0.005)</td>\n                </tr>\n                <tr>\n                  <td>Vertrouwen in politici</td>\n                  <td>0.195***</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>(0.039)</td>\n                </tr>\n                <tr>\n                  <td>links-recht positie</td>\n                  <td>0.029</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>(0.039)</td>\n                </tr>\n                <tr>\n                  <td>Num.Obs.</td>\n                  <td>1425</td>\n                </tr>\n                <tr>\n                  <td>Log.Lik.</td>\n                  <td>-567.653</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n`gof_map = c(\"nobs\", \"logLik\")`\n\n:   We kunnen verschillende goodness-of-fit statistieken toevoegen aan de tabel. Hier beperken we ons tot het aantal observaties en de log likelihood. We kunnen alle statistieken weglaten met `gof_map = NA`. Het is meestal een goed idee een Pseudo R^2^ maatstaf als goodness-of-fit statistiek toe te voegen aan de tabel. `modelsummary()` voegt echter niet automatisch de Nagelkerke R^2^ toe. We kunnen deze wel manueel toevoegen aan de tabel in Word in een rij onder 'Log.Lik.'.\n\n### Tabellen met Odds Ratios\n\nOm odds ratios en hun betrouwbaarheidsintervallen in de regressietabel te presenteren moeten een aantal elementen toegevoegd worden. Vergeet in dit geval ook niet het onderschrift (`notes`) te veranderen.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelsummary(Vote_model_mp,\n             exponentiate = TRUE, conf_level=0.95, #<1> \n             statistic = 'conf.int', #<2>\n             stars = TRUE,\n             coef_rename = c(\"(Intercept)\" = \"Constante\",\n                             \"agea\" = \"Leeftijd\",\n                             \"gndr_FMale\" = \"Man\",\n                             \"trstplt\"= \"Vertrouwen in politici\",\n                             \"lrscale\" = \"links-recht positie\"),\n             gof_map = c(\"nobs\", \"logLik\"),\n             title = \"Opkomst in Nederland (ESS9)\",\n             notes = (\"Odds ratios met 95% betrouwbaarheidsintervallen\"))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n\n      function styleCell_tva3387n414gqcagcgwj(i, j, css_id) {\n          var table = document.getElementById(\"tinytable_tva3387n414gqcagcgwj\");\n          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors\n          if (cell) {\n              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);\n              cell.classList.add(css_id);\n          } else {\n              console.warn(`Cell at (${i}, ${j}) not found.`);\n          }\n      }\n      function insertSpanRow(i, colspan, content) {\n        var table = document.getElementById('tinytable_tva3387n414gqcagcgwj');\n        var newRow = table.insertRow(i);\n        var newCell = newRow.insertCell(0);\n        newCell.setAttribute(\"colspan\", colspan);\n        // newCell.innerText = content;\n        // this may be unsafe, but innerText does not interpret <br>\n        newCell.innerHTML = content;\n      }\n      function spanCell_tva3387n414gqcagcgwj(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_tva3387n414gqcagcgwj\");\n        const targetRow = table.rows[i];\n        const targetCell = targetRow.cells[j];\n        for (let r = 0; r < rowspan; r++) {\n          // Only start deleting cells to the right for the first row (r == 0)\n          if (r === 0) {\n            // Delete cells to the right of the target cell in the first row\n            for (let c = colspan - 1; c > 0; c--) {\n              if (table.rows[i + r].cells[j + c]) {\n                table.rows[i + r].deleteCell(j + c);\n              }\n            }\n          }\n          // For rows below the first, delete starting from the target column\n          if (r > 0) {\n            for (let c = colspan - 1; c >= 0; c--) {\n              if (table.rows[i + r] && table.rows[i + r].cells[j]) {\n                table.rows[i + r].deleteCell(j);\n              }\n            }\n          }\n        }\n        // Set rowspan and colspan of the target cell\n        targetCell.rowSpan = rowspan;\n        targetCell.colSpan = colspan;\n      }\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: 10, j: 0 },  ], css_id: 'tinytable_css_ybd8rixwovzxe5gn8ijp',}, \n          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_vr9xeojytghsqqcrsqf0',}, \n          { positions: [ { i: 10, j: 1 },  ], css_id: 'tinytable_css_r6cmagxr9d1afynlepiy',}, \n          { positions: [ { i: 12, j: 1 },  ], css_id: 'tinytable_css_pinpqqrvsd7r6ggwx514',}, \n          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_mtonhd66mg99baam31qa',}, \n          { positions: [ { i: 12, j: 0 },  ], css_id: 'tinytable_css_mg20zj9euaa4xcfsenuz',}, \n          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 11, j: 1 },  ], css_id: 'tinytable_css_kwq80a5qr9xvvj76eyug',}, \n          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 11, j: 0 },  ], css_id: 'tinytable_css_38rsltaogt0ak4fmmhzf',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  styleCell_tva3387n414gqcagcgwj(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <style>\n      /* tinytable css entries after */\n      .table td.tinytable_css_ybd8rixwovzxe5gn8ijp, .table th.tinytable_css_ybd8rixwovzxe5gn8ijp { text-align: left; border-bottom: solid black 0.05em; }\n      .table td.tinytable_css_vr9xeojytghsqqcrsqf0, .table th.tinytable_css_vr9xeojytghsqqcrsqf0 { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n      .table td.tinytable_css_r6cmagxr9d1afynlepiy, .table th.tinytable_css_r6cmagxr9d1afynlepiy { text-align: center; border-bottom: solid black 0.05em; }\n      .table td.tinytable_css_pinpqqrvsd7r6ggwx514, .table th.tinytable_css_pinpqqrvsd7r6ggwx514 { text-align: center; border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_mtonhd66mg99baam31qa, .table th.tinytable_css_mtonhd66mg99baam31qa { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n      .table td.tinytable_css_mg20zj9euaa4xcfsenuz, .table th.tinytable_css_mg20zj9euaa4xcfsenuz { text-align: left; border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_kwq80a5qr9xvvj76eyug, .table th.tinytable_css_kwq80a5qr9xvvj76eyug { text-align: center; }\n      .table td.tinytable_css_38rsltaogt0ak4fmmhzf, .table th.tinytable_css_38rsltaogt0ak4fmmhzf { text-align: left; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_tva3387n414gqcagcgwj\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        <caption>Opkomst in Nederland (ESS9)</caption>\n              <tr>\n                <th scope=\"col\"> </th>\n                <th scope=\"col\">(1)</th>\n              </tr>\n        </thead>\n        <tfoot><tr><td colspan='2'>+ p < 0.1, * p < 0.05, ** p < 0.01, *** p < 0.001</td></tr>\n<tr><td colspan='2'>Odds ratios met 95% betrouwbaarheidsintervallen</td></tr></tfoot>\n        <tbody>\n                <tr>\n                  <td>Constante</td>\n                  <td>0.753</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>[0.357, 1.588]</td>\n                </tr>\n                <tr>\n                  <td>Man</td>\n                  <td>1.044</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>[0.772, 1.413]</td>\n                </tr>\n                <tr>\n                  <td>Leeftijd</td>\n                  <td>1.019***</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>[1.010, 1.028]</td>\n                </tr>\n                <tr>\n                  <td>Vertrouwen in politici</td>\n                  <td>1.215***</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>[1.126, 1.311]</td>\n                </tr>\n                <tr>\n                  <td>links-recht positie</td>\n                  <td>1.030</td>\n                </tr>\n                <tr>\n                  <td></td>\n                  <td>[0.953, 1.112]</td>\n                </tr>\n                <tr>\n                  <td>Num.Obs.</td>\n                  <td>1425</td>\n                </tr>\n                <tr>\n                  <td>Log.Lik.</td>\n                  <td>-567.653</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n1.  Vraagt `modelsummary()` de logistische coëfficiënten te exponentiëren, wat de odds ratios oplevert.\n2.  Vraagt `modelsummary()` de 95% betrouwbaarheidsintervallen te produceren. Dit is gebruikelijk bij odds ratios.\n\n`exponentiate = TRUE,`\n\n:   Met deze code vragen we om de exponentiële coëfficiënten, i.e., de odds ratios.\n\n`conf_level=0.95,`\n\n:   Met deze code kunnen we het betrouwbaarheidsniveau aanpassen. Standaard is dit niveau 0.95. Als dit het gewenste niveau is, kan deze code ook worden weggelaten.\n\n`statistic = 'conf.int'`\n\n:   Met deze code vragen we om betrouwbaarheidsintervallen te presenteren en niet de standaardfouten (de default).\n\n## Presentatie: Plots van coëfficiënten (en odds ratios)\n\nWe kunnen de output ook presenteren in de vorm van een coëfficiëntenplot (eventueel met de volledige regressietabel in Appendix), net zoals bij lineaire regressiemodellen. De procedure wordt beschreven in @sec-presenting-linear-regression-coefficient-plots . Hier is een voorbeeld op basis van bovenstaand model:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntidy(Vote_model_mp, conf.int = TRUE) |> # <1>\n  filter(term != \"(Intercept)\") |> #<2> \n  mutate(term = recode(term, # <3>\n                       \"gndr_FMale\" = \"Man\",\n                       \"agea\" = \"Leeftijd\",\n                       \"trstplt\" = \"Vertrouwen in politici\",\n                       \"lrscale\" = \"Links-rechts positie\")) |>\n  ggplot(aes(x= estimate, y= term)) +\n  geom_pointrange(aes(xmin=conf.low, \n                      xmax=conf.high)) +\n  labs(title = \"Opkomst in Nederland (ESS9)\", \n       y = \"Variabele\", \n       x = \"Logistische regressiecoëfficiënt\") + \n  geom_vline(xintercept=0, linetype=\"dashed\", color=\"red\") +\n  geom_text(aes(label = round(estimate, 2)), vjust = -0.5, hjust = -0.1)\n```\n\n::: {.cell-output-display}\n![](logit_06_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n1.  We produceren het plot in 1 stap, gebruikmakend van de `|>` operator. Je zou de syntax echter kunnen opbreken in meerdere stappen: (1) `tidy`resultaten opslaan in nieuw object; (2) Hercoderen van de `term` variabelen in dat object; en (3) plot maken.\n2.  Het intercept wordt doorgaans niet getoond.\n3.  We zouden i.p.v. `recode()` ook eerst een factor kunnen maken van de `term`variabele met `factor()`. Daarmee zouden we labels kunnen toevoegen en de volgorde waarin de variabelen verschijnen kunnen aanpassen. Zie @sec-presenting-linear-regression-coefficient-plots.\n\nAls we odds ratios willen plotten vragen we eerts dat `tidy()` odds ratios produceert en vervolgens zetten we de referentielijn voor statistische significantie op 1. We veranderen ook het label op de x-as.:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntidy(Vote_model_mp, conf.int = TRUE, exponentiate = TRUE) |>  # <1> \n  filter(term != \"(Intercept)\") |> \n  mutate(term = recode(term, \n                       \"gndr_FMale\" = \"Man\",\n                       \"agea\" = \"Leeftijd\",\n                       \"trstplt\" = \"Vertrouwen in politici\",\n                       \"lrscale\" = \"Links-rechts positie\")) |>\n  ggplot(aes(x= estimate, y= term)) +\n  geom_pointrange(aes(xmin=conf.low, \n                      xmax=conf.high)) +\n  labs(title = \"Opkomst in Nederland (ESS9)\", \n       y = \"Variabele\", \n       x = \"Odds Ratio\") + \n  geom_vline(xintercept = 1, linetype = 'dashed', color ='red') + # <2>\n  geom_text(aes(label = round(estimate, 2)), vjust = -0.5)\n```\n\n::: {.cell-output-display}\n![](logit_06_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n1.  `exponentiate = TRUE` voor de odds ratios\n2.  Odds ratios zijn multiplicatief. Daarom moet de referentielijn op 1 komen te staan\n\n### Instructies\n\n-   Meestal plaats je de coëfficiënt op de x-as en de naam van de variabele op de y-as. Het is mogelijk dit te veranderen met de `ggplot` syntax, maar dan kunnen de variabelenamen makkelijker overlappen. Lange variabelennamen leiden wel vaker tot problemen met de visualisatie (in deze [blog](https://www.andrewheiss.com/blog/2022/06/23/long-labels-ggplot/) vind je enkele tips).\n-   Standaard plot `ggplot` de coëfficiënten in alfabetische volgorde. Dit kan ervoor zorgen dat variabelen die bij elkaar horen (bv. meerdere dummies van 1 onderliggende categorische variabele) niet bij elkaar staan in het plot (zoals in het voorbeeld hierboven). We kunnen de volgorde aanpassen als we de `term` variabele omzetten in een factor variabele en de volgorde van de levels zelf bepalen. Zie @sec-presenting-linear-regression-coefficient-plots\n-   Het toevoegen van de (afgeronde) coëfficiënt-waarde kan lezers helpen de resultaten beter te vatten.\n-   Meestal plotten we de 95% betrouwbaarheidsintervallen, maar dit kan aangepast worden (we kunnen `tidy` om andere niveaus vragen).\n-   In een rapport voeg je best een notitie onderaan de figuur toe, bv. \"Notitie: OLS coëfficiënten met 95% betrouwbaarheidsinterval\".\n-   Het is handig en gebruikelijk een referentielijn toe te voegen die nul aanduidt want dan kan statistische significantie (hier: bij p \\< 0.05) onmiddellijk afgelezen worden.\n\n## Presentatie: AME Plots\n\nWe kunnen ook de gemiddelde marginale effect ( average marginal effects, AME) plotten. Dit kan het meest informatieve zijn voor lezers gezien deze waarden in termen van probabiliteiten geïnterpreteerd kunnen worden. De procedure is gelijkaardig aan die voor coëfficiëntenplots, maar in plaats van `tidy()` gebruiken we de `avg_slopes()` functie uit het `marginaleffects` package:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_slopes(Vote_model_mp) |> # <1>\n  mutate(term = recode(term, #<2>\n                       \"gndr_F\" = \"Man\", #<3> \n                       \"agea\" = \"Leeftijd\",\n                       \"trstplt\" = \"Vertrouwen in politici\",\n                       \"lrscale\" = \"Links-rechts positie\")) |>\n  ggplot(aes(x = estimate, y = term)) + \n  geom_pointrange(aes(xmin = conf.low, xmax = conf.high)) + \n  labs(title = \"Opkomst in Nederland (ESS9)\", \n       y = \"Variabele\", \n       x = \"Gemiddelde Marginale Effect\") + \n  geom_vline(xintercept = 0, linetype = 'dashed', color ='red') + \n  geom_text(aes(label = round(estimate, 2)), vjust = -0.5)\n```\n\n::: {.cell-output-display}\n![](logit_06_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n1.  We produceren het plot in 1 stap, gebruikmakend van de `|>` operator. Je zou de syntax echter kunnen opbreken in meerdere stappen: (1) `avg_slopes`resultaten opslaan in nieuw object; (2) Hercoderen van de `term` variabelen in dat object; en (3) plot\n2.  We zouden i.p.v. `recode()` ook eerst een factor kunnen maken van de `term`variabele met `factor()`. Daarmee zouden we labels kunnen toevoegen en de volgorde waarin de variabelen verschijnen kunnen aanpassen. Zie @sec-presenting-linear-regression-coefficient-plots.\n3.  `avg_slopes()` combineert niet de variabelenaam en de categorielabel bij factor variabelen in `term` (bv. het toont `gndr` in plaats van `gndrMale`).\n\nBovenstaand voorbeeld plot probabiliteiten lopende van 0 tot 1. Met de afronding op 2 decimalen vinden we gewoon een waarde van 0 voor links-rechtspositie en leeftijd. Dit is niet zo handig. We kunnen de resultaten ook in percentpunten uitdrukken wanneer we de AME (`estimate`) en de betrouwbaarheidsintervallen (`conf.low`, `conf.high`) met 100 vermenigvuldigen:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\navg_slopes(Vote_model_mp) |> \n   mutate(term = recode(term, #<2>\n                       \"gndr_F\" = \"Man\", #<3> \n                       \"agea\" = \"Leeftijd\",\n                       \"trstplt\" = \"Vertrouwen in politici\",\n                       \"lrscale\" = \"Links-rechts positie\"), \n         estimate = estimate * 100, \n         conf.low = conf.low * 100,\n         conf.high = conf.high * 100) |> \n  ggplot(aes(x = estimate, y = term)) + \n  geom_pointrange(aes(xmin = conf.low, xmax = conf.high)) + \n  labs(title = \"Opkomst in Nederland (ESS9)\", \n       y = \"Variabele\", \n       x = \"Gemiddelde Marginale Effect (Percentpunten)\") + \n  geom_vline(xintercept = 0, linetype = 'dashed', color ='red') + \n  geom_text(aes(label = round(estimate, 2)), vjust = -0.5)\n```\n\n::: {.cell-output-display}\n![](logit_06_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n### Instructies\n\nDe richtlijnen voor coëfficiënteplots worden ook hier gehanteerd (zie boven en @sec-presenting-linear-regression-coefficient-plots).\n\n## Presentatie: Plots van Voorspelde Waarden {#sec-presentation-predicted-probability-plots}\n\nTen slotte kunnen we de resultaten van een model ook grafisch presenteren met behulp van voorspelde waarden. We zagen eerder hoe we de voorspelde waarden plotten voor specifieke waarden van een continue of categorische onafhankelijke variabele in een lineair regressiemodel (see @sec-presenting-linear-regression-predicted-values-plots). Nu doen we hetzelfde voor logistische modellen.\n\n### Continue onafhankelijke variabele\n\nDe output van het model toonde dat stemmen waarschijnlijker wordt naarmate mensen meer vertouwen hebben in politici. De AME toonde dat de stijging gemiddeld 2.3 percentpunten was per eenheid vertrouwen. Maar hoeveel impact heeft dit dan echt op stemgedrag? Gaat men van heel onwaarschijnlijk tot zeer waarschijnlijk om te stemmen? Een plot kan helpen dit te verduidelijken.\n\nWe beginnen met de `predictions()` functie om de voorspelde kansen te berekenen bij verschillende waarden van vertrouwen in politici (`trstplt`).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Voorspellingen opslaan\nPred_conts <- predictions(Vote_model_mp, \n                          newdata = datagrid(trstplt = seq(from = 0, to = 10, by = 2))) # <1>\n#en bekijken\ntibble(Pred_conts)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 11\n  rowid estimate  p.value s.value conf.low conf.high gndr_F  agea lrscale\n  <int>    <dbl>    <dbl>   <dbl>    <dbl>     <dbl> <fct>  <dbl>   <dbl>\n1     1    0.699 9.37e- 5    13.4    0.603     0.779 Male    50.7    5.15\n2     2    0.774 1.09e-15    49.7    0.717     0.822 Male    50.7    5.15\n3     3    0.835 1.61e-46   152.     0.802     0.863 Male    50.7    5.15\n4     4    0.882 1.29e-64   212.     0.856     0.904 Male    50.7    5.15\n5     5    0.917 6.30e-48   157.     0.889     0.938 Male    50.7    5.15\n6     6    0.942 3.65e-34   111.     0.912     0.962 Male    50.7    5.15\n# ℹ 2 more variables: trstplt <dbl>, vote_F <fct>\n```\n\n\n:::\n:::\n\n\n\n1.  We zouden `predictions()` ook intervallen van 1pt kunnen laten berekenen, maar dit is doorgaans niet nodig. `ggplot()` verbindt de punten in een lijn.\n\nWe voeren deze data door naar `ggplot()` zoals we voorheen ook bij lineaire regressie deden:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Pred_conts, aes(x = trstplt, y = estimate)) +   # <1> \n  geom_line() +                                        # <2> \n  geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.2) +  # <3>\n  labs(title = \"Vertrouwen en opkomst in Nederland\", # <4> \n             x = \"Vertrouwen in politici\", \n       y = \"Voorspelde kans om te stemmen\")\n```\n\n::: {.cell-output-display}\n![](logit_06_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n1.  Zegt `ggplot()` welke data te gebruiken (`Pred_conts`) en wat op de x- (`trstplt`) en y-as (`estimate`) te zetten.\n2.  Zegt `ggplot()` dat we een verbindingslijn willen tussen de voorspellingen.\n3.  Zegt `ggplot()` dat we een band met betrouwbaarheidsintervallen willen en hoe donker de kleur daarvan mag zijn (`alpha = 0.2`).\n4.  Informatieve labels.\n\nWe zouden ook de schaal van y kunnen aanpassen om het volledige theoretische bereik van probabiliteiten (0 tot 1) weer te geven, indien we denken dat resultaten misleidend kunnen zijn zonder deze aanpassing:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Pred_conts, aes(x = trstplt, y = estimate)) +   \n  geom_line() +                                        \n  geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.2) +  \n  labs(title = \"Vertrouwen en opkomst in Nederland\",\n             x = \"Vertrouwen in politici\", \n       y = \"Voorspelde kans om te stemmen\") + \n  scale_y_continuous(limits = c(0,1))\n```\n\n::: {.cell-output-display}\n![](logit_06_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n### Factor onafhankelijke variabele\n\nWe kunnen deze syntax gebruiken voor predictors die factors zijn:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Voorspellingen opslaan\nPred_cat <- predictions(Vote_model_mp, by = \"gndr_F\", newdata = \"mean\") \n\n#en bekijken\ntibble(Pred_cat)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 13\n  rowid gndr_F estimate std.error statistic p.value s.value conf.low conf.high\n  <int> <fct>     <dbl>     <dbl>     <dbl>   <dbl>   <dbl>    <dbl>     <dbl>\n1     1 Female    0.863    0.0133      65.1       0     Inf    0.837     0.889\n2     2 Male      0.868    0.0127      68.2       0     Inf    0.843     0.893\n# ℹ 4 more variables: agea <dbl>, trstplt <dbl>, lrscale <dbl>,\n#   rowid_dedup <int>\n```\n\n\n:::\n:::\n\n\n\nDe data wordt dan naar een plot overgezet:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Pred_cat, aes(x= gndr_F, y= estimate)) +   \n  geom_pointrange(aes(ymin=conf.low, ymax=conf.high)) +  \n  labs(title = \"Gender en opkomst in Nederland\", \n       x = \"Gender\",\n       y = \"Voorspelde kans om te stemmen\") +\n  geom_text(aes(label = round(estimate, 2)), hjust = -0.25) +\n  scale_x_discrete(labels = c(\"Male\" = \"Man\", \"Female\" = \"Vrouw\"))\n```\n\n::: {.cell-output-display}\n![](logit_06_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n### Instructies\n\n-   Welke variabelen en waarden plot je?\n    -   Als de variabele binair/categorisch is, gebruik je alle categorieën die relevant zijn voor de discussie.\n    -   Als de variabele continue is gebruik je het minimum en maximum met redelijke tussenintervallen. Om het minimum en maximum te bepalen kijk je naar de data voor de observaties gebruikt in het model (dit is niet noodzakelijk de volledige dataset gezien observaties kunnen wegvallen door missing waarden). Met de `predictions()` kun je gemakkelijk een dataset aanmaken met alle observaties gebruikt in het model en vervolgens gebruik je `summary` om minimum en maximum te bepalen (zie @sec-predictions-for-a-continuous-predictor-variable).\n-   We gebruiken een lijn met betrouwbaarheidsintervallen voor continue predictoren; voor categorische doen we beroep op `geom_pointrange()` of `geom_errorbar()`.\n-   De y-schaal verdient bijzonder aandacht bij dit soort plots. In het eerste voorbeeld (continue predictor) wordt `scale_y_continuous()` gebruikt om ervoor te zorgen dat het plot het volledige bereik van de afhankelijke variabele (kans om te stemmen) omvat. Het tweede voorbeeld (categorische predictor) laat de keuze aan `ggplot()`. Soms maakt `ggplot()` de schaal kleiner om ongebruikte ruimte weg te laten, maar dan kan een effect groter lijken dan het is. Deze aanpak heeft ook wel nadelen, bijvoorbeeld juist veel ongebruikte ruimte in een plot en minder duidelijke visualisatie. Socioloog Kieran Healy geeft een verdere [bespreking](https://socviz.co/lookatdata.html#problems-of-honesty-and-good-judgment) over deze verschillende manieren om de schaal vorm te geven in zijn boek over datavisualisatie.\n",
    "supporting": [
      "logit_06_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}